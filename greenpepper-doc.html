<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>

<script type="text/javascript" src="/static/js/analytics.js" ></script>
<link type="text/css" rel="stylesheet" href="/static/css/banner-styles.css"/>




            <title>Full developer guide - HTML - GreenPepper Open Documentation Refactoring  - GreenPepper</title>
            
    <META HTTP-EQUIV="Pragma" CONTENT="no-cache">
    <META HTTP-EQUIV="Expires" CONTENT="-1">
    <script language="javascript">
      var contextPath = '/confluence';
    </script>

                            <link rel="stylesheet" href="/web/20121008025351cs_/http://www.greenpeppersoftware.com/confluence/s/705/1/2/_/styles/main-action.css?spaceKey=GPWODOC" type="text/css" />
            
        <link rel="shortcut icon" href="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/favicon.ico">
    <link rel="icon" type="image/png" href="/confluence/images/icons/favicon.png">
        
            <script type="text/javascript" src="/web/20121008025351js_/http://www.greenpeppersoftware.com/confluence/s/705/1/_/decorators/effects.js"></script>
    

        

    <style type="text/css" media="screen">
@import url(/web/20121008025351im_/http://www.greenpeppersoftware.com/lib/css/headers.css);
@import url(/web/20121008025351im_/http://www.greenpeppersoftware.com/lib/css/headers_gp_confuence.css);
.panel h1, .panel h2, .panel h3, .panel h4, .panel h5, .panel h6 {background-color: transparent;}
</style>

</head>

            <body onload="placeFocus()">
<!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script> if (window.archive_analytics) { window.archive_analytics.values['server_name']="wwwb-app13.us.archive.org";}; </script>

<script type="text/javascript" src="/static/js/disclaim-element.js" ></script>
<script type="text/javascript" src="/static/js/graph-calc.js" ></script>
<script type="text/javascript" src="/static/jflot/jquery.min.js" ></script>
<script type="text/javascript">
//<![CDATA[
var firstDate = 820454400000;
var lastDate = 1420070399999;
var wbPrefix = "/web/";
var wbCurrentUrl = "http:\/\/www.greenpeppersoftware.com\/confluence\/display\/GPWODOC\/Full+developer+guide+-+HTML";

var curYear = -1;
var curMonth = -1;
var yearCount = 18;
var firstYear = 1996;
var imgWidth = 475;
var yearImgWidth = 25;
var monthImgWidth = 2;
var trackerVal = "none";
var displayDay = "8";
var displayMonth = "Oct";
var displayYear = "2012";
var prettyMonths = ["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];

function showTrackers(val) {
	if(val == trackerVal) {
		return;
	}
	if(val == "inline") {
		document.getElementById("displayYearEl").style.color = "#ec008c";
		document.getElementById("displayMonthEl").style.color = "#ec008c";
		document.getElementById("displayDayEl").style.color = "#ec008c";		
	} else {
		document.getElementById("displayYearEl").innerHTML = displayYear;
		document.getElementById("displayYearEl").style.color = "#ff0";
		document.getElementById("displayMonthEl").innerHTML = displayMonth;
		document.getElementById("displayMonthEl").style.color = "#ff0";
		document.getElementById("displayDayEl").innerHTML = displayDay;
		document.getElementById("displayDayEl").style.color = "#ff0";
	}
   document.getElementById("wbMouseTrackYearImg").style.display = val;
   document.getElementById("wbMouseTrackMonthImg").style.display = val;
   trackerVal = val;
}
function getElementX2(obj) {
	var thing = jQuery(obj);
	if((thing == undefined) 
			|| (typeof thing == "undefined") 
			|| (typeof thing.offset == "undefined")) {
		return getElementX(obj);
	}
	return Math.round(thing.offset().left);
}
function trackMouseMove(event,element) {

   var eventX = getEventX(event);
   var elementX = getElementX2(element);
   var xOff = eventX - elementX;
	if(xOff < 0) {
		xOff = 0;
	} else if(xOff > imgWidth) {
		xOff = imgWidth;
	}
   var monthOff = xOff % yearImgWidth;

   var year = Math.floor(xOff / yearImgWidth);
	var yearStart = year * yearImgWidth;
   var monthOfYear = Math.floor(monthOff / monthImgWidth);
   if(monthOfYear > 11) {
       monthOfYear = 11;
   }
   // 1 extra border pixel at the left edge of the year:
   var month = (year * 12) + monthOfYear;
   var day = 1;
	if(monthOff % 2 == 1) {
		day = 15;
	}
	var dateString = 
		zeroPad(year + firstYear) + 
		zeroPad(monthOfYear+1,2) +
		zeroPad(day,2) + "000000";

	var monthString = prettyMonths[monthOfYear];
	document.getElementById("displayYearEl").innerHTML = year + 1996;
	document.getElementById("displayMonthEl").innerHTML = monthString;
	// looks too jarring when it changes..
	//document.getElementById("displayDayEl").innerHTML = zeroPad(day,2);

	var url = wbPrefix + dateString + '/' +  wbCurrentUrl;
	document.getElementById('wm-graph-anchor').href = url;

   //document.getElementById("wmtbURL").value="evX("+eventX+") elX("+elementX+") xO("+xOff+") y("+year+") m("+month+") monthOff("+monthOff+") DS("+dateString+") Moy("+monthOfYear+") ms("+monthString+")";
   if(curYear != year) {
       var yrOff = year * yearImgWidth;
       document.getElementById("wbMouseTrackYearImg").style.left = yrOff + "px";
       curYear = year;
   }
   if(curMonth != month) {
       var mtOff = year + (month * monthImgWidth) + 1;
       document.getElementById("wbMouseTrackMonthImg").style.left = mtOff + "px";
       curMonth = month;
   }
}
//]]>
</script>

<style type="text/css">body{margin-top:0!important;padding-top:0!important;min-width:800px!important;}#wm-ipp a:hover{text-decoration:underline!important;}</style>
<div id="wm-ipp" lang="en" class="__wb_banner_div" style="display:none; position:relative;padding:0 5px;min-height:70px;min-width:800px">


<div id="wm-ipp-inside" class="__wb_banner_div" style="position:fixed;padding:0!important;margin:0!important;width:97%;min-width:780px;border:5px solid #000;border-top:none;background-image:url(/static/images/toolbar/wm_tb_bk_trns.png);text-align:center;-moz-box-shadow:1px 1px 3px #333;-webkit-box-shadow:1px 1px 3px #333;box-shadow:1px 1px 3px #333;font-size:11px!important;font-family:'Lucida Grande','Arial',sans-serif!important;">
   <table style="border-collapse:collapse;margin:0;padding:0;width:100%;"><tbody><tr>
   <td style="padding:10px;vertical-align:top;min-width:110px;">
   <a href="/web/" title="Wayback Machine home page" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0"/></a>
   </td>
   <td style="padding:0!important;text-align:center;vertical-align:top;width:100%;">

       <table style="border-collapse:collapse;margin:0 auto;padding:0;width:570px;"><tbody><tr>
       <td style="padding:3px 0;" colspan="2">
       <form target="_top" method="get" action="/web/form-submit.jsp" name="wmtb" id="wmtb" style="margin:0!important;padding:0!important;"><input type="text" name="url" id="wmtbURL" value="http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML" style="width:400px;font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;" onfocus="javascript:this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20121008025351" /><input type="submit" value="Go" style="font-size:11px;font-family:'Lucida Grande','Arial',sans-serif;margin-left:5px;width: inherit !important" /><span id="wm_tb_options" style="display:block;"></span></form>
       </td>
       <td style="vertical-align:bottom;padding:5px 0 0 0!important;" rowspan="2">
           <table style="border-collapse:collapse;width:110px;color:#99a;font-family:'Helvetica','Lucida Grande','Arial',sans-serif;"><tbody>
			
           <!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
           <tr style="width:110px;height:16px;font-size:10px!important;">
           	<td style="padding-right:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20111124055801/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="24 Nov 2011"><strong>NOV</strong></a>
		                
               </td>
               <td id="displayMonthEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight:bold;text-transform:uppercase;width:34px;height:15px;padding-top:1px;text-align:center;" title="You are here: 2:53:51 Oct 8, 2012">OCT</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight:bold;text-transform:uppercase;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       Nov
                       
               </td>
           </tr>

           <!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
           <tr>
               <td style="padding-right:9px;white-space:nowrap;overflow:visible;text-align:right!important;vertical-align:middle!important;" nowrap="nowrap">
               
		                <a href="/web/20111124055801/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML" title="5:58:01 Nov 24, 2011" style="background-color:transparent;border:none;"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a>
		                
               </td>
               <td id="displayDayEl" style="background:#000;color:#ff0;width:34px;height:24px;padding:2px 0 0 0;text-align:center;font-size:24px;font-weight: bold;" title="You are here: 2:53:51 Oct 8, 2012">8</td>
				<td style="padding-left:9px;white-space:nowrap;overflow:visible;text-align:left!important;vertical-align:middle!important;" nowrap="nowrap">
               
                       <img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0"/>
                       
			    </td>
           </tr>

           <!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
           <tr style="width:110px;height:13px;font-size:9px!important;">
				<td style="padding-right:9px;font-size:11px!important;font-weight: bold;text-align:right;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
		                <a href="/web/20090914023943/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML" style="text-decoration:none;color:#33f;font-weight:bold;background-color:transparent;border:none;" title="14 Sep 2009"><strong>2009</strong></a>
		                
               </td>
               <td id="displayYearEl" style="background:#000;color:#ff0;font-size:11px!important;font-weight: bold;padding-top:1px;width:34px;height:13px;text-align:center;" title="You are here: 2:53:51 Oct 8, 2012">2012</td>
				<td style="padding-left:9px;font-size:11px!important;font-weight: bold;white-space:nowrap;overflow:visible;" nowrap="nowrap">
               
                       2013
                       
				</td>
           </tr>
           </tbody></table>
       </td>

       </tr>
       <tr>
       <td style="vertical-align:middle;padding:0!important;">
           <a href="/web/20121008025351*/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML" style="color:#33f;font-size:11px;font-weight:bold;background-color:transparent;border:none;" title="See a list of every capture for this URL"><strong>3 captures</strong></a>
           <div class="__wb_banner_div" style="margin:0!important;padding:0!important;color:#666;font-size:9px;padding-top:2px!important;white-space:nowrap;" title="Timespan for captures of this URL">14 Sep 09 - 8 Oct 12</div>
       </td>
       <td style="padding:0!important;">
       <a style="position:relative; white-space:nowrap; width:475px;height:27px;" href="" id="wm-graph-anchor">
       <div class="__wb_banner_div" id="wm-ipp-sparkline" style="position:relative; white-space:nowrap; width:475px;height:27px;background-color:#fff;cursor:pointer;border-right:1px solid #ccc;" title="Explore captures for this URL">
			<img id="sparklineImgId" style="position:absolute; z-index:9012; top:0px; left:0px;"
				onmouseover="showTrackers('inline');" 
				onmouseout="showTrackers('none');"
				onmousemove="trackMouseMove(event,this)"
				alt="sparklines"
				width="475"
				height="27"
				border="0"
				src="/web/jsp/graph.jsp?graphdata=475_27_1996:-1:000000000000_1997:-1:000000000000_1998:-1:000000000000_1999:-1:000000000000_2000:-1:000000000000_2001:-1:000000000000_2002:-1:000000000000_2003:-1:000000000000_2004:-1:000000000000_2005:-1:000000000000_2006:-1:000000000000_2007:-1:000000000000_2008:-1:000000000000_2009:-1:000000001000_2010:-1:000000000000_2011:-1:000000000010_2012:9:000000000100_2013:-1:000000000000_2014:-1:000000000000"></img>
			<img id="wbMouseTrackYearImg" 
				style="display:none; position:absolute; z-index:9010;"
				width="25" 
				height="27"
				border="0"
				src="/static/images/toolbar/transp-yellow-pixel.png"></img>
			<img id="wbMouseTrackMonthImg"
				style="display:none; position:absolute; z-index:9011; " 
				width="2"
				height="27" 
				border="0"
				src="/static/images/toolbar/transp-red-pixel.png"></img>
       </div>
		</a>

       </td>
       </tr></tbody></table>
   </td>
   <td style="text-align:right;padding:5px;width:65px;font-size:11px!important;">
       <a href="javascript:;" onclick="document.getElementById('wm-ipp').style.display='none';" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_close.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;margin-bottom:23px;background-color:transparent;border:none;" title="Close the toolbar">Close</a>
       <a href="http://faq.web.archive.org/" style="display:block;padding-right:18px;background:url(/static/images/toolbar/wm_tb_help.png) no-repeat 100% 0;color:#33f;font-family:'Lucida Grande','Arial',sans-serif;background-color:transparent;border:none;" title="Get some help using the Wayback Machine">Help</a>
   </td>
   </tr></tbody></table>

</div>
</div>
<script type="text/javascript">
 var wmDisclaimBanner = document.getElementById("wm-ipp");
 if(wmDisclaimBanner != null) {
   disclaimElement(wmDisclaimBanner);
 }
</script>
<!-- END WAYBACK TOOLBAR INSERT -->

    


    <script type="text/javascript">
        function hideMessage(messageId)
        {
            var message = document.getElementById(messageId)
            message.style.display = "none";
            setCookie(messageId, true);
        }
    </script>

        
<div id="PageContent">

    <table border="0" cellpadding="0" cellspacing="0" width="100%">

                <tr class="topBar">
            <td align="left">
                &nbsp;
                <span class="topBarDiv">             
    <script language="JavaScript">
        function showBreadcrumbsEllipsis()
        {
            document.getElementById('breadcrumbsEllipsis').style.display = 'none';
            document.getElementById('breadcrumbsExpansion').style.display = 'inline';
        }
    </script>

                <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/dashboard.action">Dashboard</a>
     &gt;

                        <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC">GreenPepper Open Documentation Refactoring </a> &gt;
        
        
        
        
        
                                    <span id="breadcrumbs"><span id="breadcrumbsEllipsis"/><a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML#" onclick="showBreadcrumbsEllipsis();return false;" title="Documentation">...</a></span><span id="breadcrumbsExpansion" style="display:none;"><a href='/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Documentation'>Documentation</a></span>&nbsp;&gt;&nbsp;</span><a href='/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Developer+Guide'>Developer Guide</a>&nbsp;&gt;&nbsp;<a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML">Full developer guide - HTML</a>
                                                                        
     </span>
            </td>

            <td align="right" valign="middle" style="white-space:nowrap">
                    <form method="POST" action="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/dosearchsite.action" name="searchForm" style="padding: 1px; margin: 1px">
        <input type="hidden" name="quickSearch" value="true" />
        
        <input type="hidden" name="searchQuery.spaceKey" value="conf_global" />
        <input type="text" accessKey="s" name="searchQuery.queryString" size="25"/>
        <input type="submit" value="Search"/>
    </form>
            </td>
        </tr>
        
                <tr>
            <td style="padding: 5px" colspan="2">
            <table style="padding: 0px; margin: 0px 5px; width: 100%;" cellspacing="0" cellpadding="1" border="0">
                <tr>
										<td rowspan="2" valign="bottom" width="1%"><a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC"><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/download/userResources/GPWODOC/logo" align="absmiddle" border="0"></a></td>
										<td valign="bottom" align="left" width="1%" nowrap>&nbsp;
                        <span class="logoSpaceLink">            <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC">GreenPepper Open Documentation Refactoring </a>    </span>
                    </td>
                    <td align="right" valign="top" width="98%">
                                                    
    <span class="smalltext" id="userNavBar">
                    

            <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/login.action?os_destination=%2Fdisplay%2FGPWODOC%2FFull%2Bdeveloper%2Bguide%2B-%2BHTML">Log In</a>

                        </span>
    						
						        <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML?decorator=printable" rel="nofollow"><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/print_16.gif" width="16" height="16" hspace="1" vspace="1" align="absmiddle" border="0" alt="View a printable version of the current page." title="View a printable version of the current page."/></a>

                                                        
            <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/pages/doexportpage.action?pageId=158827462&amp;type=TYPE_PDF" rel="nofollow">
        <img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/attachments/pdf.gif" height="16" width="16" border="0" align="absmiddle" title="Export Page as PDF"></a>
                                                                                &nbsp;
                    </td>
                </tr>
                <tr>
                    <td height="22" align="left" colspan="2">&nbsp;
                        <span class="pagetitle" style="line-height: 1; margin: 0px; text-decoration: none">
                                        Full developer guide - HTML
                            </span>
                    </td>
                </tr>
            </table>
            </td>
        </tr>
            </table>

        <!--
    Root decorator: all decisions about how a page is to be decorated via the
                    inline decoration begins here.
-->



<!--
    Switch based upon the context. However, for now, just delegate to a decorator
    identified directly by the context.
-->


    
    


    
    
        
    
    
<table border="0" cellpadding="0" cellspacing="0" width="100%">

    <tr>
        <td>
            <div class="greynavbar">
                <span style="float:right; padding: 6px 10px 4px 0px">
								
        
        
        
        						    <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/spaces/browsespace.action?key=GPWODOC"><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/browse_space.gif" height="16" width="16" border="0" align="absmiddle" title="Browse Space"></a>&nbsp;<a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/spaces/browsespace.action?key=GPWODOC">Browse Space</a>
					    				</span>

				<ul id="foldertab" style="margin-bottom: 0px; padding-top: 10px;">
											<li><a  id="viewPageLink"  href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML"  class="current"    accessKey="v">View</a></li>
											<li><a  id="viewPageLink"  href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/pages/pageinfo.action?pageId=158827462"    accessKey="i"><u>I</u>nfo</a></li>
									</ul>
            </div>
        </td>
    </tr>
    <tr>
        <td valign="top" class="pagebody">

                        <table width="100%" cellpadding="0" cellspacing="0" border="0" style="clear: both">
                <tr>
                    <td width='100%' class="pagecontent" valign="top">

                    
                    
                    
                                                    
                            <table width="100%" style="margin-bottom: 5px" cellspacing="0">
                                <tr>
                                    <td align="left" valign="top">
                                        <span class="smalltext">
                                                        Added by     <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/~lcobos">Laurent Cobos</a>, last edited by     <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/~fdenommee">Francois Denommee</a> on Oct 29, 2009
                      &nbsp;(<a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/pages/diffpages.action?pageId=158827462&amp;originalId=163840011">view change</a>)
              
                                            
 
<style type="text/css">
div.auto_complete {
    width: 350px;
    background: #fff;
}

div.auto_complete ul {
    border: 1px solid #888;
    margin: 0;
    padding: 0;
    width: 100%;
    list-style-type: none;
}

div.auto_complete ul li {
    margin: 0;
    padding: 3px;
}

div.auto_complete ul li.selected {
    background-color: #ffb;
}

div.auto_complete ul strong.highlight {
    color: #800;
    margin: 0;
    padding: 0;
}
</style>


<!-- Delay the loading of the external javascript file needed for labels (as it takes too long to load and visibly holds loading of the page body) -->
<!-- To do this without javascript errors over undefined functions, we need to declare stubs here (that are overrided later by the proper implementations) -->
<script language="JavaScript" type="text/javascript">
    function doAddLabel(hideTextfieldAfterAddParam)
    {
        // stub
    }

    function onAddLabel()
    {
        // stub
    }

    function showLabelsInput()
    {
        // stub
    }
</script>

<!-- This is a hack to work around an apparent SiteMesh bug - /web/20121008025351/http://jira.opensymphony.com/browse/SIM-198 -->


<span class="error"><span class="errorMessage" id="errorSpan"></span></span>
<form name="addLabelForm" method="" action="" onSubmit="doAddLabel(false); return false;" style="margin: 0px; padding: 0px">
    <div style="float: left">Labels:&nbsp;</div>
    <div id="labelsInfo" style="float: left; width: 90%">
        <span id="labelsList">
                    (None)
                </span>
            </div>
    <br clear="all"/><!-- Do not remove this line-break. You will make Safari cry. -->
    <div id="labelInputSpan" style="display: none; clear: both;">
        <br/>
        <div style="border: 1px solid #cccccc; padding: 8px; align: center; background-color: #f0f0f0">

        <div id="labelOperationErrorContainer" style="display: none"><span class="error"><span class="errorMessage" id="labelOperationErrorMessage"></span></span></div>

        <table width="100%">
            <tr>
                <td>
                    <div class="formtitle" style="padding-bottom: 3px; font-size: 13px;">Add Labels</div>
                </td>
                <td align="right"><div id="waitImageAndStatus" style="display: none; height: 16px;"><img alt="Wait Image" border=0 align="absmiddle" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/wait.gif">&nbsp;<span id="labelOperationStatus" class="smalltext" style="vertical-align: middle"></span></div></td>
            </tr>
            <tr><td width="50%">
                    Enter labels to add to this page:<br/>
        <input autocomplete="off" type="text" id="labelName" name="labelsString" value="" class="monospaceInput" size="40">
        <input type="submit" onclick="doAddLabel(false); return false;" value="Add"><input type="button" onclick="doAddLabel(true); return false;" value="Done">
        <div class="auto_complete" id="labelsAutocompleteList"></div>
        <div class="smalltext">
            <em>Tip:</em> Looking for a label? Just start typing.
        </div>
        </td>
            <td width="50%" valign="top">
                <div id="suggestedLabelsSpan"></div>
            </td>
        </tr></table>
        </div>
    </div>
</form>
    <script type="text/javascript">
        // if there is javascript support, enable the [Edit] link that enables AJAX label adding/removing functionality
        if (document.getElementById('editLabelsLink'))
        {
            document.getElementById('editLabelsLink').style.display = 'inline';
        }
    </script>
                                        </span>
                                    </td>
                                    <td align="right" valign="top">
                                                                            </td>
                                </tr>
                            </table>

                                                        
                            <div class="wiki-content">
                               <!-- wiki content -->
            <h1 id="Fulldeveloperguide-HTML-Fulldeveloperguide">Full developer guide </h1>
<h1 id="Fulldeveloperguide-HTML-1.FixturesConventions">1. Fixtures Conventions</h1>
<h3 id="Fulldeveloperguide-HTML-Introduction">Introduction</h3>

<p>Even though one of the objectives of <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> is to create a common language between the business experts and the development team, there will always be a certain degree of difference between the natural language and the programing language.</p>

<p>Hence comes the reason for having fixtures. Fixtures are the glue between the business expert examples and the software being developed.</p>

<p>When running the table, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> uses a fixture to mediate between the example expressed in the table and the system under test.</p>

<h4 id="Fulldeveloperguide-HTML-Collaborationdemandscompromise">Collaboration demands compromise</h4>

<p>The goal of the fixture, is to translate from one language to the other so neither has to compromise their clarity or their design to match the other. The fixture is the compromise.</p>

<p>A fixture is any class. It does not have to extend or implement any base class/interface.</p>

<h3 id="Fulldeveloperguide-HTML-Thefixturename">The fixture name</h3>

<p>The fixture name is found right next to the interpreter specification.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>simple fixture name</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class="sectionMacro" border="0" cellpadding="5" cellspacing="0" width="100%"><tbody><tr><td class="confluenceTd"  valign="top" width="20%">
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> rule for </td>
<td class='confluenceTd'> <b>FixtureName</b> </td>
</tr>
<tr>
<td class='confluenceTd'> .. </td>
<td class='confluenceTd'> .. </td>
</tr>
</tbody></table></td><td class="confluenceTd"  valign="top" width="20%">
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> list of </td>
<td class='confluenceTd'> <b>FixtureName</b> </td>
</tr>
<tr>
<td class='confluenceTd'> .. </td>
<td class='confluenceTd'> .. </td>
</tr>
</tbody></table></td><td class="confluenceTd"  valign="top" width="60%">
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> do with </td>
<td class='confluenceTd'> <b>FixtureName</b> </td>
</tr>
<tr>
<td class='confluenceTd'> .. </td>
<td class='confluenceTd'> .. </td>
</tr>
</tbody></table></td></tr></tbody></table>
</div></div>
<p>Since a fixture is a Java or C# class, when <em>GreenPepper</em> execute the example, it will try to match the fixture name with a class name.</p>

<h4 id="Fulldeveloperguide-HTML-Whataboutpackagesandnamespaces%3F">What about packages and namespaces?</h4>

<p>Usually, Java classes are found inside package and C# inside namespaces.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>An explicity imported fixture</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> rule for </td>
<td class='confluenceTd'> <b>com.xyz.stuff.FixtureName</b> </td>
</tr>
<tr>
<td class='confluenceTd'> .. </td>
<td class='confluenceTd'> .. </td>
</tr>
</tbody></table>
</div></div>

<h3 id="Fulldeveloperguide-HTML-Readability">Readability</h3>

<p>The problem with packages and namespace and with the classes naming convention, camel casing and no spaces, is that they makes the example less readable for the business expert.</p>

<p>To help readability, we have the following options</p>

<p><a name="Fulldeveloperguide-HTML-Importtables"></a></p>

<h4 id="Fulldeveloperguide-HTML-Importtables">Import tables</h4>

<p>Import tables are special tables at the beginning of the document.<br/>
By using an import table we can remove the package from the fixture name thus improving the readability of the example.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>an import table</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> import </th>
</tr>
<tr>
<td class='confluenceTd'> x.y.z </td>
</tr>
</tbody></table>
</div></div>
<p>In C#, the namespaces are also provided in the Import table.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>an import table with namespaces</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> import </th>
</tr>
<tr>
<td class='confluenceTd'> Sample.Application.Stuff </td>
</tr>
</tbody></table>
</div></div>
<p>When <em>GreenPepper</em> will search for fixtures in the code, it will look into all the packages/namespaces specified in the import tables.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>Example of fixture name with implicit import</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> import </th>
</tr>
<tr>
<td class='confluenceTd'> com.xyz.mystuff </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> list of </th>
<th class='confluenceTh'> FixtureName </th>
</tr>
<tr>
<td class='confluenceTd'> ... </td>
<td class='confluenceTd'> ... </td>
</tr>
</tbody></table>
<p><em>GreenPepper</em> will match com.xyz.stuff.FixtureName.</p>
</div></div>
<p>You can have more than one package or namespace imported in a document. Just add more lines to the import table.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>an import table with multiple imports</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> import </th>
</tr>
<tr>
<td class='confluenceTd'> com.xyz.stuff </td>
</tr>
<tr>
<td class='confluenceTd'> com.xyz.otherstuff </td>
</tr>
<tr>
<td class='confluenceTd'> com.xyz.yapackage </td>
</tr>
</tbody></table>
</div></div>
<p><em>GreenPepper</em> will search for the fixture in each of these packages until it finds a matching class.</p>

<h4 id="Fulldeveloperguide-HTML-Humanizedname">Humanized name</h4>

<p>Event without the package, programmatic naming conventions are not the most readable form for the name of the example.<br/>
This can be arranged by following the <span class="nobr"><a href="/web/20121008025351/http://en.wikipedia.org/wiki/CamelCase" rel="nofollow">camel casing<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span> conventions.</p>

<p>Use a free form with space separating each words for the fixture name. And makes the fixture class use camel casing.</p>

<p><em>GreenPepper</em> will match the words of the fixture name with the camel cased class name.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>Camel casing multiple word fixture name</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class="sectionMacro" border="0" cellpadding="5" cellspacing="0" width="100%"><tbody><tr><td class="confluenceTd"  valign="top">
<p><b>fixture name</b><br/>
the fixture<br/>
a fixture with a very long name becomes </p></td><td class="confluenceTd"  valign="top">
<p>TheFixture<br/>
AFixtureWithAVeryLongName</p></td></tr></tbody></table>
</div></div><table cellpadding='5' width='85%' cellspacing='8px' class='noteMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>When using the humanized version of fixture naming, you must use <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/WIP">Import tables</a>.<br/>
explicit package won't work ex: <font color="red">&#124;list of &#124; com.xyz.stuff.the fixture name&#124;</font> </td></tr></table>

<h4 id="Fulldeveloperguide-HTML-Thefixturesuffix">The fixture suffix</h4>

<p>If you wish to clearly distinguish between your domain classes and the classes that serve as fixture, you can add the suffix <b><em>Fixture</em></b> at the end of the fixtures classes name.</p>

<p>When writing the example, you can omit the suffix Fixture from the fixture name. This keeps the example closer to the real domain.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>Suffix example</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> rule for </th>
<th class='confluenceTh'> bank account fixture </th>
</tr>
<tr>
<td class='confluenceTd'> ... </td>
<td class='confluenceTd'> ... </td>
</tr>
</tbody></table>
<p>and</p>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> rule for </th>
<th class='confluenceTh'> bank account </th>
</tr>
<tr>
<td class='confluenceTd'> ... </td>
<td class='confluenceTd'> ... </td>
</tr>
</tbody></table>
<p>will both match</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class BankAccountFixture {
 ...
}</pre>
</div></div>
</div></div>

<h3 id="Fulldeveloperguide-HTML-Constructor">Constructor</h3>

<p>A fixture can receive parameters during it's construction. You must have a public constructor that matches the numbers of parameters.</p>

<p>When no parameters are specified in the example, the fixture class must have a public constructor without parameters.</p>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>Empty constructor example</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> rule for </th>
<th class='confluenceTh'> bank account </th>
</tr>
<tr>
<td class='confluenceTd'> ... </td>
<td class='confluenceTd'> ... </td>
</tr>
</tbody></table>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class BankAccountFixture {
   <span class="code-keyword">public</span> BankAccountFixture()
   { ... }
}</pre>
</div></div>
</div></div>
<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>An example with two parameters</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> rule for </th>
<th class='confluenceTh'> poker table </th>
<th class='confluenceTh'> ante </th>
<th class='confluenceTh'> 5$ </th>
<th class='confluenceTh'> max bet </th>
<th class='confluenceTh'> 100$ </th>
</tr>
<tr>
<td class='confluenceTd'> ... </td>
<td class='confluenceTd'> ... </td>
</tr>
</tbody></table>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class PokerTableFixture {
   <span class="code-keyword">public</span> PokerTableFixture(Ammount ante, Ammount maxBet)
   { ... }
}</pre>
</div></div>
</div></div>
<h1 id="Fulldeveloperguide-HTML-2.RuleValidation%28RuleFor%29">2. Rule Validation (Rule For)</h1>
<h2 id="Fulldeveloperguide-HTML-Definition">Definition</h2>
<div class="panel" style="border-style: solid; border-color: #000000; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #000000; background-color: #c0c0c0; "><b>DEFINITION</b></div><div class="panelContent" style="background-color: #ffffff; ">
<p>The <tt>RuleForInterpreter</tt> is used to express concrete and measurable business rules.<br/>
During the execution of the specification, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> compares the values returned by the system under development against the expected values defined by the Business Expert.<br/>
<img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/download/attachments/158827471/LexicalFormOfRuleFor.jpg" align="absmiddle" border="0" /></p>
<ul>
	<li>The first row of the table indicates the set of rules to be tested by <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/>.</li>
	<li>The next row is called the <b>header row</b> and serves to distinguish the given values and the expected values. Given values serve as inputs to the system, whereas expected values serve as comparison values against values that are actually returned by the system. When a column header ends with special characters <b>?</b> or <b>()</b>, it denotes an expected value.</li>
	<li>Finally, the remaining rows capture the examples. They are the executable test rows.</li>
</ul>
</div></div>

<h3 id="Fulldeveloperguide-HTML-SpecificKeywordsforexpectedvalues">Specific Keywords for expected values</h3>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> offers a list of useful keywords to support the Business Expert.</p>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Empty cells </th>
<td class='confluenceTd'> When a test cell is left blank, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> only shows the returned value </td>
</tr>
<tr>
<th class='confluenceTh'> <b>error</b> </th>
<td class='confluenceTd'> When you expect an error, specify it in the cell to test that particular behavior </td>
</tr>
</tbody></table>

<h3 id="Fulldeveloperguide-HTML-Coloring">Coloring</h3>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will visually show the test result by coloring each testing cell:</p>
<div class="panel"><div class="panelHeader" style="background-color: #98FB98; "><b><b>GREEN</b></b></div><div class="panelContent" style="background-color: #98FB98; ">
<p>When the expected value match the returned value, the <tt>RuleForInterpreter</tt> colors the cell as "right" by coloring it green.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F08080; "><b><b>RED</b></b></div><div class="panelContent" style="background-color: #F08080; ">
<p>If the values don't match, the <tt>RuleForInterpreter</tt> colors the cell as "wrong" in red.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F0E68C; "><b><b>YELLOW</b></b></div><div class="panelContent" style="background-color: #F0E68C; ">
<p>If the system encounters an execution error, the cell is colored yellow and <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> provides information about the error.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #D3D3D3; "><b><b>GRAY</b></b></div><div class="panelContent" style="background-color: #D3D3D3; ">
<p>If no expected value is specified in a test, the <tt>RuleForInterpreter</tt> colors the cell in gray.</p>
</div></div>

<p>Here is an example of cell coloring:</p>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> rule for </td>
<td class='confluenceTd'> calculator </td>
</tr>
<tr>
<td class='confluenceTd'> x </td>
<td class='confluenceTd'> y </td>
<td class='confluenceTd'> sum? </td>
<td class='confluenceTd'> product() </td>
<td class='confluenceTd'> quotient? </td>
</tr>
<tr>
<td class='confluenceTd'> 10 </td>
<td class='confluenceTd'> 0 </td>
<td class='confluenceTd'> 10 </td>
<td class='confluenceTd'> 0 </td>
<td class='confluenceTd'> 0 </td>
</tr>
<tr>
<td class='confluenceTd'> 6 </td>
<td class='confluenceTd'> 3 </td>
<td class='confluenceTd'> 9 </td>
<td class='confluenceTd'> -5 </td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>
<h2 id="Fulldeveloperguide-HTML-WritingfixturesforRuleTables">Writing fixtures for Rule Tables</h2>

<p>As we've seen in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Rule+For+definition" title="Rule For definition">Rule For definition</a>, a table of rules is used to express business rules of the application under development.</p>

<p>A fixture for a table of rules defines how the specific <em>given</em> and <em>expected</em> columns of a rule table are mapped to the system under development.</p>

<p>This page shows the fixture code that supports the examples introduced in the <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Rule+For+specification" title="Writing a Rule For specification">Writing a Rule For specification</a> documentation.</p>

<h3 id="Fulldeveloperguide-HTML-FixtureforCalculator">Fixture for Calculator</h3>

<p>Consider the first example of business rule table described in Table of Rules documentation, shown again below.</p>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> rule for </td>
<td class='confluenceTd'> Division </td>
</tr>
<tr>
<td class='confluenceTd'> dividend </td>
<td class='confluenceTd'> divisor </td>
<td class='confluenceTd'> quotient? </td>
</tr>
<tr>
<td class='confluenceTd'> 6.0 </td>
<td class='confluenceTd'> 2.0 </td>
<td class='confluenceTd'> 3.0 </td>
</tr>
<tr>
<td class='confluenceTd'> 7 </td>
<td class='confluenceTd'> 2 </td>
<td class='confluenceTd'> 3.5 </td>
</tr>
<tr>
<td class='confluenceTd'> 18 </td>
<td class='confluenceTd'> 3.0 </td>
<td class='confluenceTd'> 6 </td>
</tr>
<tr>
<td class='confluenceTd'> 15 </td>
<td class='confluenceTd'> 2 </td>
<td class='confluenceTd'> 7.5 </td>
</tr>
</tbody></table>

<p>The first cell of the first row indicates that a <tt>RuleForInterpreter</tt> will be used to interpret the example table. The next cell says that the fixture to use is called <tt>Calculator</tt>. In Java, the name of the fixture is the name of a Java class.</p>

<p>The second row, also know as the header row, designates the <tt>given</tt> columns and <tt>expected</tt> columns. In the example, <tt>dividend</tt> and <tt>divisor</tt> are <em>given</em> columns, whereas <tt>quotient?</tt> is an <em>expected</em> column.</p>

<p>The fixture code to support this example in Java is the class <tt>Calculator</tt> shown below. </p>

<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code for the Calculator fixture</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class Division
{
    <span class="code-keyword">public</span> <span class="code-object">double</span> dividend;
    <span class="code-keyword">public</span> <span class="code-object">double</span> divisor;

    <span class="code-keyword">public</span> <span class="code-object">double</span> quotient()
    {
        <span class="code-keyword">return</span> dividend / divisor;
    }
}</pre>
</div></div>

<p>That class follows the general rules of fixtures described in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/1.+Fixtures+Conventions" title="1. Fixtures Conventions">1. Fixtures Conventions</a>. It exposes the instance variable <tt>dividend</tt> to map with the <em>given</em> column <b><em>dividend</em></b>. The <em>given</em> column <em><b>divisor</b></em> corresponds to the public instance variable <tt>divisor</tt>. The <em>expected</em> column <em><b>quotient?</b></em> is mapped to the public instance method <tt>quotient()</tt>.</p>

<table cellpadding='5' width='85%' cellspacing='8px' class='infoMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Note</b><br />
<p>This is a very simple example in which the fixture object does not call on the system under development, but performs the calculation. The <tt>quotient()</tt> method uses the instance variables <tt>dividend</tt> and <tt>divisor</tt> to perform the calculation by itself.</p></td></tr></table>

<h4 id="Fulldeveloperguide-HTML-Howisthetableprocessed%3F">How is the table processed?</h4>

<p>When it runs this table, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> reads the first row to select the <em>interpreter</em> and <em>fixture</em>. It then reads the second to know what are the given and expected columns. Finally it starts testing from the third row down to the end of the table.</p>

<p>For the third row <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> carries out the following sequence of steps:</p>

<ol>
	<li>It assigns the value 6.0 to the <tt>dividend</tt> instance variable</li>
	<li>It assigns the value 2.0 to the <tt>divisor</tt> instance variable</li>
	<li>It calls the method <tt>quotient()</tt> of the fixture to get the value calculated by the system under development.</li>
	<li>It reads the value 3.0 from the <em>quotient?</em> column and compares it to the value returned by the fixture. Since the values are equal, it will annotate the cell as <em>right</em>, which results in the cell being colored green.</li>
</ol>


<p>Same goes for the fourth and fifth rows.</p>

<p>On the other hand, on the last row the comparison will fail. <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will mark the <em>expected</em> cell wrong. That cell will be colored red and will display a message including the expected value and the actual value.</p>

<h4 id="Fulldeveloperguide-HTML-Howarethetypesofthevalueshandled%3F">How are the types of the values handled?</h4>

<p>The instance variables <tt>dividend</tt> and <tt>divisor</tt> are of type double, so the given values in the example table needs to be double as well. For the fourth row, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will automatically convert the <em>given</em> values 7 and 2 to doubles before assigning them to the instance variables.</p>

<p>The return value of the <tt>quotient</tt> method is also a double, which means that the values provided in the <em><b>quotient?</b></em> <em>expected</em> column must be doubles as well. When <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> compares the value returned by the fixture with the value provided as an expectation, it will first convert the expected value to the type of the actual returned value. In the fifth row, it will convert the value 6 to a double and then do the comparison.</p>

<h3 id="Fulldeveloperguide-HTML-AMoreRealisticExample">A More Realistic Example</h3>

<p>The Calculator example is very simple. In a real world example, the fixture code would not perform any real work but would instead delegate to the application under development. In other words, if this was a real application the fixture would not carry out the division operation but call on the system under development. The general rule is to keep the fixture as thin as possible to be merely a mediator between the example table and the application code.</p>

<p>The Mortgage example described in <span class="error">&#91;Writing a Rule For specification &#93;</span> document better illustrates the role of the fixture and its interactions with the system under development. This example is shown again here:</p>

<table style="display:none">
	<tr>
		<td>Begin Info</td>
	</tr>
</table>
<div style="padding:0px; margin:0px; ">
		

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'>rule for</td>
<td class='confluenceTd'>insurance premium fee calculation</td>
</tr>
<tr>
<td class='confluenceTd'>sale price</td>
<td class='confluenceTd'>down payment</td>
<td class='confluenceTd'>premium fee?</td>
<td class='confluenceTd'>financed amount?</td>
</tr>
<tr>
<td class='confluenceTd'>$100,000</td>
<td class='confluenceTd'>$15,000</td>
<td class='confluenceTd'>$2,125.00</td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'>$100,000</td>
<td class='confluenceTd'>$30,000</td>
<td class='confluenceTd'>$0.00</td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
<tr>
<td class='confluenceTd'>$100,000</td>
<td class='confluenceTd'>$25,000</td>
<td class='confluenceTd'>$0.00</td>
<td class='confluenceTd'>&nbsp;</td>
</tr>
</tbody></table>

</div>
<table style="display:none">
	<tr>
		<td>End Info</td>
	</tr>
</table>


<p>This example uses the <tt>InsurancePremiumFeeCalculation</tt> fixture class. The two <em>given</em> columns, which are <em><b>sale price</b></em> and <em><b>down payment</b></em>, are mapped respectively to the instance variables <tt>salePrice</tt> and <tt>downPayment</tt>. The two <em>expected</em> columns, called <em><b>premium fee?</b></em> and <em><b>financed amount?</b></em>, correspond respectively to the methods <tt>premiumFee()</tt> and <tt>financedAmount()</tt>.</p>

<h4 id="Fulldeveloperguide-HTML-Howarespacesbetweenwordshandled%3F">How are spaces between words handled?</h4>

<p>You have noticed that you can separate words in the example table with spaces. <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will convert the sequence a space-separated words to a valid Java identifier by removing the spaces and capitalizing the first letter of every word except the first one. This is called camel casing.</p>

<ul>
	<li>For class names, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> uses <b>upper</b> camel casing with the first letter of the identifier capitalized as well. In our example, the label <em><b>insurance premium fee calculation</b></em> is converted to the class name <tt>InsurancePremiumFeeCalculation</tt>.</li>
	<li>For method or instance variable names, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> uses <b>lower</b> camel casing where the first letter of the identifier is left in lowercase.</li>
</ul>


<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<p>The supporting code is here:</p>

<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code for the InsurancePremiumFeeCalculation fixture</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class InsurancePremiumFeeCalculationFixture
{
    <span class="code-keyword">public</span> Money salePrice;
    <span class="code-keyword">public</span> Money downPayment;

    <span class="code-keyword">public</span> Money premiumFee()
    {
        InsuranceFee insuranceFee = <span class="code-keyword">new</span> InsuranceFee(salePrice);
        <span class="code-keyword">return</span> insuranceFee.forDownpayment(downPayment);
    }

    <span class="code-keyword">public</span> Money financedAmount()
    {
        <span class="code-keyword">return</span> salePrice.minus(downPayment);
    }
}</pre>
</div></div>

<table cellpadding='5' width='85%' cellspacing='8px' class='infoMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Note</b><br />
<p>You might have noticed that the fixture class name is <tt>InsurancePremiumFeeCalculationFixture</tt> and not <tt>InsurancePremiumFeeCalculation</tt>. It does not matter to <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/>. For fixture class names, the <tt>Fixture</tt> suffix can be added to make it easier to differentiate from the application under development code. <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will deal with it automatically.</p></td></tr></table>

<p>In this example, the fixture merely delegates the work to the application under development. Namely, the <tt>InsuranceFee</tt> domain object is responsible for performing the actual work.</p>

<p>The code for the system under development is:</p>

<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code for the system under development</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class InsuranceFee
{
    <span class="code-keyword">private</span> <span class="code-keyword">final</span> Money salePrice;

    <span class="code-keyword">public</span> InsuranceFee(Money salePrice)
    {
        <span class="code-keyword">this</span>.salePrice = salePrice;
    }

    <span class="code-keyword">public</span> Money forDownpayment(Money downPayment)
    {
        <span class="code-keyword">return</span> downPayment.greaterThan(salePrice.times(Ratio.percent(25))) ? Money.zero() : financedAmount( downPayment ).times( Ratio.of(25, 1000) );
    }

    <span class="code-keyword">private</span> Money financedAmount(Money downPayment)
    {
        <span class="code-keyword">return</span> salePrice.minus( downPayment );
    }
}</pre>
</div></div>

<h4 id="Fulldeveloperguide-HTML-Whatabouttheemptycolumn%3F">What about the empty column?</h4>

<p>The <em><b>financed amount?</b></em> expected value is left empty to tell <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> that this is an information column. We don't want to perform any test in that column, but rather show the value to help our understanding of the calculation. The calculated values will be shown when the example is run and marked with the ignored annotation, making them appear gray.</p>

<h4 id="Fulldeveloperguide-HTML-Howareapplicationvaluetypeshandled%3F">How are application value types handled?</h4>

<p>We've seen that <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will automatically convert the <em>given</em> values in the table to the type of the corresponding instance variable. </p>

<p>This is done automatically for the most common built-in Java types. The mortgage example, however, uses a <em><b>money</b></em> type, which is defined by the application under development in the <tt>Money</tt> business domain class.</p>

<p>When <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> encounters a custom type while performing conversion, it will look for a public static method called <em><b>parse</b></em> to handle the conversion from a <tt>String</tt> to the custom type. To do the conversion from the custom type to a <tt>String</tt>, it will call the method <tt>toString()</tt> on the custom type.</p>

<p>When <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> verifies an <em>expected</em> value to an <em>actual</em> value for a custom type, it does the following steps. It:</p>

<ol>
	<li>Converts the expected value specified as a string in the table to the custom type using the <tt>parse(String text)</tt> method.</li>
	<li>Compares the expected value and the actual value using the <tt>equals(Object other)</tt> method on the expected value, passing it the actual value.</li>
</ol>


<p>Here's the relevant part of the code for the <tt>Money</tt> class:</p>

<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code for the Money class</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class Money
{
    <span class="code-keyword">private</span> <span class="code-keyword">final</span> BigDecimal dollars;

    <span class="code-keyword">public</span> Money(BigDecimal dollars)
    {
        <span class="code-keyword">this</span>.dollars = dollars;
    }

    <span class="code-keyword">public</span> <span class="code-keyword">static</span> Money parse(<span class="code-object">String</span> text)
    {
        <span class="code-keyword">return</span> <span class="code-keyword">new</span> Money( <span class="code-keyword">new</span> BigDecimal( normalize( text ) ) );
    }

    <span class="code-keyword">private</span> <span class="code-keyword">static</span> <span class="code-object">String</span> normalize(<span class="code-object">String</span> text)
    {
        <span class="code-keyword">return</span> text.replaceAll( <span class="code-quote">"\\$"</span>, <span class="code-quote">"").replaceAll( "</span>,<span class="code-quote">", "</span><span class="code-quote">").replaceAll( "</span>\\s<span class="code-quote">", "</span>");
    }

    <span class="code-comment">// ...
</span>
    <span class="code-keyword">public</span> <span class="code-object">boolean</span> equals(<span class="code-object">Object</span> other)
    {
        <span class="code-keyword">if</span> (other <span class="code-keyword">instanceof</span> Money)
        {
            Money that = (Money) other;
            <span class="code-keyword">return</span> <span class="code-keyword">this</span>.dollars.compareTo( that.dollars ) == 0;
        }
        <span class="code-keyword">else</span>
        {
            <span class="code-keyword">return</span> <span class="code-keyword">false</span>;
        }
    }

    <span class="code-keyword">public</span> <span class="code-object">int</span> hashCode()
    {
        <span class="code-keyword">return</span> dollars.hashCode();
    }

    <span class="code-keyword">public</span> <span class="code-object">String</span> toString()
    {
        <span class="code-keyword">return</span> <span class="code-quote">"$"</span> + dollars;
    }

    <span class="code-comment">// ...
</span>}</pre>
</div></div>

<h2 id="Fulldeveloperguide-HTML-%28newin2.9%29RowactionsinruleFor">(new in 2.9) Row actions in ruleFor</h2>

<p>There are 3 annotations(attributes) that can be used in the fixture with a RuleForInterpreter. </p>
<ul>
	<li>BeforeRow</li>
	<li>AfterRow</li>
	<li>BeforeFirstExpectation</li>
</ul>



<h4 id="Fulldeveloperguide-HTML-BeforeRow">BeforeRow</h4>
<p>A method annotated with <em>BeforeRow</em> will be call at the beginning of each new row so you can prepare your fixture.</p>

<h4 id="Fulldeveloperguide-HTML-AfterRow">AfterRow</h4>
<p>A method annotated with <em>AfterRow</em> will be call at the end of each row so you can reset your fixture.</p>

<h4 id="Fulldeveloperguide-HTML-BeforeFirstExpectation">BeforeFirstExpectation</h4>
<p>The method annotated with <em>BeforeFirstExpectation</em> will be call on each row just before the first ExpectedColumn(column with a <em>?</em>) is encounter so you can prepared the return values for this row.</p>

<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code with RowAction annotations</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class DomainStuffFixture
{
    <span class="code-keyword">private</span> DomainStuff stuff;
    <span class="code-keyword">private</span> <span class="code-object">int</span> x;
    <span class="code-keyword">private</span> <span class="code-object">int</span> y;

    <span class="code-keyword">public</span> void setX(<span class="code-object">int</span> x) 
    {
         <span class="code-keyword">this</span>.x = x;
    } 

    <span class="code-keyword">public</span> void setY() 
    {
        <span class="code-keyword">this</span>.y = y;
    }

    @BeforeFirstExpectation
    <span class="code-keyword">public</span> void allocateDomainStuff() {
        stuff = DomainStuffService.allocateDomainStuff(x, y);
    }

    <span class="code-keyword">public</span> <span class="code-object">int</span> getComputedValueOne() 
    {
         <span class="code-keyword">return</span> stuff.getComputedValueOne();
    }

    <span class="code-keyword">public</span> <span class="code-object">int</span> getOtherComputedValueO() 
    {
         <span class="code-keyword">return</span> stuff.getOtherComputedValue();
    }

    @AfterRow
    <span class="code-keyword">public</span> void freeDomainStuff() {
        DomainStuffService.freeStuff(stuff);
    }

    <span class="code-comment">// ...
</span>}</pre>
</div></div>

<p>The three annotations are optionals, you can use none, some or all of them in your fixture dependiong on your needs.</p>



<h2 id="Fulldeveloperguide-HTML-Let%27sWrapUp">Let's Wrap Up</h2>

<p>When <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> runs a rule table example, it creates a fixture class from the name indicated in the second cell of the first row. That class is used to mediate between the development table and the application code when checking the example against the system under development. </p>

<p>The second row of the table is the header row and is read from left to right. Two types of columns are supported in rule tables:</p>

<ul>
	<li><em>given</em> values, which are mapped to public instance variables in the fixture class</li>
	<li><em>expected</em> values, which are checked against values returned by the corresponding public instance methods</li>
</ul>


<h3 id="Fulldeveloperguide-HTML-Headers">Headers</h3>

<p>For a <em>given</em> column header cell, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/>:</p>

<ul>
	<li>Figures out the public instance variable to use using camel casing rules.</li>
	<li>If there is no instance variable that matches the label of the column header, it marks the cell with an error annotation, causing the cell to appear yellow and to display a stack trace of the error. That column will be ignored entirely.</li>
</ul>


<p>For an <em>expected</em> column header cell:</p>

<ul>
	<li>It figures out the public instance method to use using camel casing rules.</li>
	<li>If there is no such method or if it's not publicly accessible, it marks the cell with an error annotation, causing the cell to appear yellow and to display a stack trace of the error. That column will be ignored entirely.</li>
</ul>


<h3 id="Fulldeveloperguide-HTML-Columns">Columns</h3>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will then run all remaining rows one at a time, going through all cells in the row from left to right.</p>

<p>For a <em>given</em> column:</p>

<ul>
	<li>It converts the text entered in the cell to the type of the instance variable. To do that it uses either built-in converters (for basic Java types) or delegates to a method called <em><b>parse</b></em> (for domain types).</li>
	<li>It assigns the converted value to the instance variable.</li>
	<li>However, if type conversion fails, the cell is reported as an error.</li>
</ul>


<p>For an <em>expected</em> column:</p>

<ul>
	<li>It converts the text entered in the cell to the return type of the instance method. To do that it uses either built-in converters (for basic Java types) or delegates to a method called <em><b>parse</b></em> (for domain types).</li>
	<li>It compares the actual value to the converted value based on the definition of the equality for the type.</li>
	<li>If the values match, it marks the cell with a right annotation causing it to appear green.</li>
	<li>If the values do not match, it marks the cell with a wrong annotation so that it appears red and displays the expected and actual values.</li>
	<li>However, if type conversion fails or if the method throws an exception the cell is reported as an error.</li>
</ul>

<h1 id="Fulldeveloperguide-HTML-3.ListValidation%28Listof%2CSetof%2CSupersetof%2CSubsetof%29">3. List Validation (List of, Set of, Superset of, Subset of)</h1>
<h2 id="Fulldeveloperguide-HTML-Definition">Definition</h2>
<div class="panel" style="border-style: solid; border-color: #000000; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #000000; background-color: #c0c0c0; "><b>DEFINITION</b></div><div class="panelContent" style="background-color: #ffffff; ">
<p>The <tt>collection interpreters</tt> are used to express any kind of groups, lists or sets of values.</p>

<p>When a collection interpreter is executed, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> compares the list of values expected with the list of values returned by the system under development. The test result depends on the specific collection interpreter selected.</p>

<p><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/download/attachments/158827473/LexicalFormOfCollectionInterpreters.jpg" align="absmiddle" border="0" /></p>

<ul>
	<li>As for all other interpreters, the first row of the <tt>collection interpreters</tt> specifies the name of the interpreter and the name of the collection to be tested.</li>
	<li>The next row is used to define the name of each attribute related to the members of the collection of data.</li>
	<li>The following rows are used to specify the set of values to test.</li>
</ul>
</div></div>


<h3 id="Fulldeveloperguide-HTML-Specifickeywords">Specific keywords</h3>
<p> None</p>

<h3 id="Fulldeveloperguide-HTML-Colouring">Colouring</h3>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will visually indicate the test result by colouring the rows:</p>
<div class="panel"><div class="panelHeader" style="background-color: #98FB98; "><b><b>GREEN</b></b></div><div class="panelContent" style="background-color: #98FB98; ">
<p>As expected, the row is returned by the system under development.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F08080; "><b><b>RED</b></b></div><div class="panelContent" style="background-color: #F08080; ">
<p>A row is missing or in surplus in the list returned by the system under development.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F0E68C; "><b>* YELLOW*</b></div><div class="panelContent" style="background-color: #F0E68C; ">
<p>If the system encounters an execution error, the cell is in yellow, and <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> provides information about the error.</p>
</div></div>

<p><em><b>Particular behaviour for the list of interpreters:</b></em><br/>
Since the <tt>ListOfInterpreter</tt> expects to match exactly the expected list and the list returned by the SUD, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> compares each cell of the table separately. If the expected value is different from the returned value, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> colours the cell in red and provide the two values.</p>

<p><em><b>Particular behaviour for the superset of interpreters:</b></em><br/>
Since the <tt>SupersetOfInterpreter</tt> accepts that the specification may contain rows that are not contained in the SUD, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will not colour the rows contained in the specification but not returned by the SUD.</p>
<h2 id="Fulldeveloperguide-HTML-WritingfixturesforListtables">Writing fixtures for List tables</h2>

<h2 id="Fulldeveloperguide-HTML-WritingfixturesforListofValue">Writing fixtures for List of Value</h2>

<p>As we've seen in the <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Collection+definition" title="Collection definition">Collection Interpreters definition</a>, the collection interpreters are used to express a collection of data to be compared with the system under development.</p>

<p>When running the table, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> uses a fixture to mediate between the example expressed in collection of values tables and the system under development. The fixture code defines how the specific lists of values are mapped to the application code.</p>

<p>This page shows the fixture code that supports the examples introduced in the</p>
<ul>
	<li><a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Collection+definition" title="Collection definition">Collection Interpreters definition</a></li>
</ul>


<table style="display:none">
	<tr>
		<td>Import</td>
	</tr>
			<tr>
			<td>com.greenpepper.samples.application.phonebook</td>
		</tr>
	</table>

<h2 id="Fulldeveloperguide-HTML-Usingthe%7B%7BCollectionInterpreter%7D%7Dalone">Using the <tt>CollectionInterpreter</tt> alone</h2>

<p>Consider the example of collection of values table described in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Collection+definition" title="Collection definition">Collection Interpreters definition</a>, shown again below.</p>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'>list of</td>
<td class='confluenceTd'>Canada Province Codes</td>
</tr>
<tr>
<td class='confluenceTd'>Name</td>
<td class='confluenceTd'> Code </td>
</tr>
<tr>
<td class='confluenceTd'>ALBERTA</td>
<td class='confluenceTd'> AB </td>
</tr>
<tr>
<td class='confluenceTd'>BRITISH COLUMBIA </td>
<td class='confluenceTd'> BC </td>
</tr>
<tr>
<td class='confluenceTd'>MANITOBA </td>
<td class='confluenceTd'> MB </td>
</tr>
<tr>
<td class='confluenceTd'>NEW BRUNSWICK</td>
<td class='confluenceTd'> NB </td>
</tr>
<tr>
<td class='confluenceTd'>NEWFOUNDLAND and LABRADOR </td>
<td class='confluenceTd'> NL </td>
</tr>
<tr>
<td class='confluenceTd'>NOVA SCOTIA </td>
<td class='confluenceTd'> NS </td>
</tr>
<tr>
<td class='confluenceTd'>NUNAVUT </td>
<td class='confluenceTd'> NU </td>
</tr>
<tr>
<td class='confluenceTd'>ONTARIO </td>
<td class='confluenceTd'> ON </td>
</tr>
<tr>
<td class='confluenceTd'>PRINCE EDWARD ISLAND </td>
<td class='confluenceTd'> PE </td>
</tr>
<tr>
<td class='confluenceTd'>QUEBEC </td>
<td class='confluenceTd'> QC </td>
</tr>
<tr>
<td class='confluenceTd'>SASKATCHEWAN </td>
<td class='confluenceTd'> SK </td>
</tr>
<tr>
<td class='confluenceTd'>YUKON </td>
<td class='confluenceTd'> YT </td>
</tr>
<tr>
<td class='confluenceTd'>OTHER PROVINCE</td>
<td class='confluenceTd'> OP </td>
</tr>
</tbody></table>
<p>The first cell of the first row indicates that a the <tt>ListOfInterpreter</tt> will be used to interpret the example table. The next cell says that the <tt>query()</tt> method to use is in the fixture named <tt>Canada Province Codes</tt>. In Java, the name of the fixture is the name of a Java class. The returned value of the <tt>query()</tt> method must be a Collection which is, in our example, a Set of Provinces.</p>

<p>The second row, also known as the header row, designates the <tt>attribute</tt> columns of the Collection's elements. In our example, <tt>Name</tt> and <tt>Code</tt> are the <em>attribute</em> of the Province.</p>

<p>The fixture code to support this example in Java is the class <tt>CanadaProvinceCodesFixture</tt> shown below.</p>

<h4 id="Fulldeveloperguide-HTML-Thequerymethod">The query method</h4>

<p>The GreenPepper method called to get the list of data from the fixture is <tt>query()</tt> in Java and <tt>Query()</tt> in C#.</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> Collection query() {...}
or
    <span class="code-keyword">public</span> ICollection Query() {...}</pre>
</div></div>
<p>The return type of the query method does not have to be specifically a Collection/ICollection.<br/>
It can be any of the derived Collection class or an Array.</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> Employees[] query() {...}
or
    <span class="code-keyword">public</span> Set&lt;Something&gt; Query() {...}</pre>
</div></div>
<p>You can choose another method then <tt>query</tt> by telling GreenPepper which method to use with the help of an annotation or attributes.</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">import</span> com.greenpepper.reflect.CollectionProvider;
   ...
    @CollectionProvider
    <span class="code-keyword">public</span> Collection query() {...}
or
    using GreenPepper.Reflect;
   ...
    [CollectionProvider]
    <span class="code-keyword">public</span> ICollection Query() {...}</pre>
</div></div>
<p>but the method specifies still have to be parameterless and return a Collection/ICollection implementation or an array.</p>

<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code for the CanadaProvinceCodesFixture</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class CanadaProvinceCodesFixture
{
    <span class="code-keyword">public</span> Set&lt;Province&gt; query()
    {
        <span class="code-keyword">return</span> Country.canada().provinces();
    }
}</pre>
</div></div>
<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code of the System Under Development</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class Country
{
    <span class="code-keyword">private</span> <span class="code-object">String</span> name;
    <span class="code-keyword">private</span> Set&lt;Province&gt; provinces = <span class="code-keyword">new</span> TreeSet&lt;Province&gt;();

    <span class="code-keyword">private</span> Country(<span class="code-object">String</span> name)
    {
        <span class="code-keyword">this</span>.name = name;
    }

    <span class="code-keyword">public</span> <span class="code-keyword">static</span> Country canada()
    {
        Country canada = <span class="code-keyword">new</span> Country(<span class="code-quote">"CANADA"</span>);
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"ALBERTA"</span>,<span class="code-quote">"AB"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"BRITISH COLUMBIA"</span>,<span class="code-quote">"BC"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"MANITOBA"</span>,<span class="code-quote">"MB"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"NEW BRUNSWICK"</span>,<span class="code-quote">"NB"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"NEWFOUNDLAND and LABRADOR"</span>,<span class="code-quote">"NL"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"NOVA SCOTIA"</span>,<span class="code-quote">"NS"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"NUNAVUT"</span>,<span class="code-quote">"NU"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"ONTARIO"</span>,<span class="code-quote">"ON"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"PRINCE EDWARD ISLAND"</span>,<span class="code-quote">"PE"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"QUEBEC"</span>,<span class="code-quote">"QC"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"SASKATCHEWAN"</span>,<span class="code-quote">"SK"</span>));
        canada.provinces.add(<span class="code-keyword">new</span> Province(<span class="code-quote">"YUKON "</span>,<span class="code-quote">"YT"</span>));
        <span class="code-keyword">return</span> canada;
    }

    <span class="code-keyword">public</span> Set&lt;Province&gt; provinces()
    {
        <span class="code-keyword">return</span> provinces;
    }
}

<span class="code-keyword">public</span> class Province <span class="code-keyword">implements</span> Comparable
{
    <span class="code-keyword">public</span> <span class="code-object">String</span> name;
    <span class="code-keyword">public</span> <span class="code-object">String</span> code;

    <span class="code-keyword">public</span> Province(<span class="code-object">String</span> name, <span class="code-object">String</span> code)
    {
        <span class="code-keyword">this</span>.name = name;
        <span class="code-keyword">this</span>.code = code;
    }

    <span class="code-keyword">public</span> <span class="code-object">int</span> compareTo(<span class="code-object">Object</span> o)
    {
        <span class="code-keyword">return</span> name.compareTo(((Province)o).name);
    }
}</pre>
</div></div>

<h4 id="Fulldeveloperguide-HTML-Howisthetableprocessed%3F">How is the table processed?</h4>

<p>When it runs this table, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> reads the first row to select the <em>interpreter</em> and <em>fixture</em>. It then reads the second to know what are the attribute columns. Finally it starts testing from the third row down to the end of the table. <table style="display:none">
	<tr>
		<td>Begin Info</td>
	</tr>
</table>
<div style="padding:0px; margin:0px; ">
		

<p>For the third row <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> carries out the following sequence of steps:</p>
<ol>
	<li>It calls the method <tt>query()</tt> of the fixture <tt>CanadaProvinceCodesFixture</tt> to retrieve the Collection to test.</li>
	<li>It reads the value <em>ALBERTA</em> from the column Name and compares it to the attribute <tt>Name</tt> of the first element of the List.<br/>
Since the values are equal, it will annotate the cell as <em>right</em>, which results in the cell being colored green.</li>
	<li>It reads the value <em>AB</em> from the column Code and compares it to the attribute <tt>Code</tt> of the first element of the List.<br/>
Since the values are equal, it will annotate the cell as <em>right</em>, which results in the cell being colored green.</li>
</ol>

</div>
<table style="display:none">
	<tr>
		<td>End Info</td>
	</tr>
</table>
<br/>
Step 2 and 3 are repeated through the remaining rows of the table.<br/>
For the fourth row, the Codes are not the same so <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will mark the expected cell wrong. The cell will be colored red and will display a message including the expected value and the actual value.<br/>
The order of Provinces NEW BRUNSWICK and MANITOBA are inverted compared to the alphabetical sorting. <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will annotate both rows as <em>wrong</em>. Each cell will be colored red and will display a message including the expected value and the actual value.</p>

<p>The last row is not part the set of Province returned by the system under development. In that particular case, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will insert the keyword <em>missing</em> and color the row in red.</p>

<h2 id="Fulldeveloperguide-HTML-Usinga%7B%7BCollectionInterpreter%7D%7Djoinedwiththe%7B%7BDoWithInterpreter%7D%7D">Using a <tt>CollectionInterpreter</tt> joined with the <tt>DoWithInterpreter</tt></h2>

<p>In this particular case, there is only one fixture combining the methods of the <tt>CollectionInterpreter</tt> and the methods of the <tt>DoWithInterpreter</tt>. So, in the <tt>CollectionInterpreter</tt> table, the second cell of the first row says which method to call from the <tt>DoWithInterpreter</tt> fixture.</p>

<p>Consider the example of the Phone Book application as described in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Collection+definition" title="Collection definition">Collection Interpreters definition</a>. The <tt>DoWithInterpreter</tt> will insert entries in the Phone Book. The <tt>ListOfInterpreter</tt> is then used to test that the Phone Book really contains the inserted entries.</p>

<p>1. We use the <tt>DoWithInterpreter</tt> to create our personal phone book.</p>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> do with </td>
<td class='confluenceTd'> phone book </td>
</tr>
<tr>
<td class='confluenceTd'> insert </td>
<td class='confluenceTd'> Fred </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Flintstone </td>
<td class='confluenceTd'> with number </td>
<td class='confluenceTd'> (123) 456-7890 </td>
</tr>
<tr>
<td class='confluenceTd'> insert </td>
<td class='confluenceTd'> Barney </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Rubble </td>
<td class='confluenceTd'> with number </td>
<td class='confluenceTd'> (123) 321-7666 </td>
</tr>
<tr>
<td class='confluenceTd'> insert </td>
<td class='confluenceTd'> Great </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Gazoo </td>
<td class='confluenceTd'> with number </td>
<td class='confluenceTd'> (123) 989-4455 </td>
</tr>
</tbody></table>
<p>2. The test to be performed is: <b>The requirement list should be the same as the SUD list.</b></p>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> list of </td>
<td class='confluenceTd'> Phone book entries </td>
</tr>
<tr>
<td class='confluenceTd'> FirstName </td>
<td class='confluenceTd'> LastName </td>
</tr>
<tr>
<td class='confluenceTd'> Fred </td>
<td class='confluenceTd'> Flintstone </td>
</tr>
<tr>
<td class='confluenceTd'> Betty </td>
<td class='confluenceTd'> Rubble </td>
</tr>
<tr>
<td class='confluenceTd'> Great </td>
<td class='confluenceTd'> Gazoo </td>
</tr>
<tr>
<td class='confluenceTd'> Wilma </td>
<td class='confluenceTd'> Flintstone </td>
</tr>
</tbody></table>

<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code for the PhoneBookFixture</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class PhoneBookFixture
{
    <span class="code-keyword">private</span> PhoneBook phoneBook = <span class="code-keyword">new</span> PhoneBook();

    <span class="code-keyword">public</span> void insertWithNumber(<span class="code-object">String</span> firstName, <span class="code-object">String</span> lastName, <span class="code-object">String</span> number)
    {
        phoneBook.insert(<span class="code-keyword">new</span> PhoneBookEntry(firstName, lastName, number));
    }

    <span class="code-keyword">public</span> List&lt;PhoneBookEntry&gt; query()
    {
        <span class="code-keyword">return</span> phoneBook.entries();
    }
}</pre>
</div></div>
<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code of the System Under Development</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class PhoneBook
{
    <span class="code-keyword">private</span> List&lt;PhoneBookEntry&gt; entries = <span class="code-keyword">new</span> ArrayList&lt;PhoneBookEntry&gt;();

    <span class="code-keyword">public</span> void insert(PhoneBookEntry entry)
    {
        entries.add(entry);
    }

    <span class="code-keyword">public</span> List&lt;PhoneBookEntry&gt; entries()
    {
        <span class="code-keyword">return</span> entries;
    }
}

<span class="code-keyword">public</span> class PhoneBookEntry
{
    <span class="code-keyword">public</span> <span class="code-object">String</span> firstName;
    <span class="code-keyword">public</span> <span class="code-object">String</span> lastName;
    <span class="code-keyword">public</span> <span class="code-object">String</span> number;

    <span class="code-keyword">public</span> PhoneBookEntry(<span class="code-object">String</span> firstName, <span class="code-object">String</span> lastName, <span class="code-object">String</span> number)
    {
        <span class="code-keyword">this</span>.firstName = firstName;
        <span class="code-keyword">this</span>.lastName = lastName;
        <span class="code-keyword">this</span>.number = number;
    }
}</pre>
</div></div>

<h3 id="Fulldeveloperguide-HTML-WritingfixturesforderivedListofValue%28SetOf%2CSubsetOf%2CSupersetOf%29">Writing fixtures for derived List of Value (SetOf, SubsetOf, SupersetOf)</h3>

<p>The fixture writting and results annotations are exactly similar in all points.<br/>
Of course the behavior of the test will varry see <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Collection+definition" title="Collection definition">Collection Interpreters definition</a> for detail.</p>
<h1 id="Fulldeveloperguide-HTML-4.Workflowvalidation%28DoWith%29">4. Workflow validation (Do With)</h1>
<h2 id="Fulldeveloperguide-HTML-Definition">Definition</h2>
<div class="panel" style="border-style: solid; border-color: #000000; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #000000; background-color: #c0c0c0; "><b>DEFINITION</b></div><div class="panelContent" style="background-color: #ffffff; ">
<p>The <tt>DoWithInterpreter</tt> is used to express interactions with the system under development that must be performed in a particular order. This form of specification provides information about the business flow.</p>

<p>When a sequence of action is executed, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> confirms that each action has successfully been performed.</p>

<p><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/download/attachments/158827475/LexicalFormOfDoWith.jpg" align="absmiddle" border="0" /></p>

<ul>
	<li>As for all other interpreters, the first row of the <tt>DoWithInterpreter</tt> specifies the name of the interpreter and the name of the sequence of actions to be tested. What makes the <tt>DoWithInterpreter</tt> particular is that it only have to be defined once for all the sequences of actions expressed in a page. Obviously, the <tt>DoWithInterpreter</tt> must be define before any sequence of actions.</li>
	<li>The following rows are used to express specific actions.</li>
	<li>The form of each row of a <tt>DoWithInterpreter</tt> shall respect the following rules:
	<ul>
		<li>a row shall begin with a part of the action description,</li>
		<li>each parameter shall be isolated in a cell,</li>
		<li>each parameter shall be separated by parts of the action description.</li>
	</ul>
	</li>
	<li>An action description can be left blank in order to separate two parameters.</li>
	<li>The <tt>DoWithInterpreter</tt> provide a minimum of keyword used to define specific action.</li>
	<li>The <tt>DoWithInterpreter</tt> may also be expressed in Bullet List form or Number List form.</li>
</ul>
</div></div>


<h3 id="Fulldeveloperguide-HTML-SpecificKeywords">Specific Keywords</h3>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> offers a list of useful keywords to support the Business Expert. Those keywords are placed at the beginning of an action row.</p>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Accept</th>
<td class='confluenceTd'> Confirm that the action as been executed by the system under development. </td>
</tr>
<tr>
<th class='confluenceTh'> Check </th>
<td class='confluenceTd'> Verify the specified expected value with the value returned by the system under development</td>
</tr>
<tr>
<th class='confluenceTh'> Reject</th>
<td class='confluenceTd'> The action should not be performed by the system under development (expected errors).</td>
</tr>
<tr>
<th class='confluenceTh'> Display </th>
<td class='confluenceTd'> Print the value returned by the system under development.</td>
</tr>
</tbody></table>

<h3 id="Fulldeveloperguide-HTML-Coloring">Coloring</h3>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will visually show the test result by coloring each testing cell:</p>

<div class="panel"><div class="panelHeader" style="background-color: #98FB98; "><b><b>GREEN</b></b></div><div class="panelContent" style="background-color: #98FB98; ">
<p>When the action has been executed successfully, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> color the cell(s) in green.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F08080; "><b><b>RED</b></b></div><div class="panelContent" style="background-color: #F08080; ">
<p>If the action execution has failed, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> color the cell(s) in red.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F0E68C; "><b><b>YELLOW</b></b></div><div class="panelContent" style="background-color: #F0E68C; ">
<p>If the system encounters an execution error, the cell is colored yellow and <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> provides information about the error.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #CCCCCC; "><b><b>GRAY</b></b></div><div class="panelContent" style="background-color: #CCCCCC; ">
<p>When the action has been executed successfully, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will display the returned value in gray.</p>
</div></div>

<p><br clear="all" /></p>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> Standard form (without keyword) </th>
<td class='confluenceTd'> Only the Action description will be colored.</td>
</tr>
<tr>
<th class='confluenceTh'> Accept </th>
<td class='confluenceTd'>  Only the cell containing the keyword Accept will be colored.</td>
</tr>
<tr>
<th class='confluenceTh'> Check </th>
<td class='confluenceTd'> The cell containning the expected value will be colored. In the case of a failure, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will show the expected and the returned values.</td>
</tr>
<tr>
<th class='confluenceTh'> Reject </th>
<td class='confluenceTd'> Only the cell containing the keyword Reject will be colored.</td>
</tr>
<tr>
<th class='confluenceTh'> Display </th>
<td class='confluenceTd'> A new cell at the end of the row will be colored containing the returned value.</td>
</tr>
</tbody></table>
<h2 id="Fulldeveloperguide-HTML-WritingfixturesforDoWithtables">Writing fixtures for Do With tables</h2>

<p>As we've seen in the <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Do+With+definition" title="Do With definition">Do With definition</a>, a sequence of tables is used to express a business flow in the application under development.</p>

<p>When running the table, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> uses a fixture to mediate between the example expressed in the sequence of tables and the system under development. The fixture code defines how the specific actions are mapped to the application code.</p>

<p>This page shows the fixture code that supports the examples introduced in the <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Do+With+specification" title="Writing a Do With specification">Writing a Do With specification</a>.</p>

<h3 id="Fulldeveloperguide-HTML-FixtureforBank">Fixture for Bank</h3>

<p>Consider the first example of business flow described in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Do+With+specification" title="Writing a Do With specification">Writing a Do With specification</a>, shown again below.</p>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> do with </td>
<td class='confluenceTd'> bank </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> open checking account </td>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> under the name of </td>
<td class='confluenceTd'> Spongebob </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Squarepants </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> check </td>
<td class='confluenceTd'> that balance of account </td>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> is </td>
<td class='confluenceTd'> $0.00 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> end </td>
</tr>
</tbody></table>

<p>The first table indicates to use a <tt>DoWithInterpreter</tt>, which handles a business flow expressed as a sequence of tables. The fixture <tt>Bank</tt> will do the mediation with the application under development. </p>

<p>The interpreter will run all the tables until the end of the document. In this case, the second and third tables compose the business flow example.</p>

<p>The second table indicates to perform the action <em><b>open checking account under the name of</b></em> on the system under development, with the parameters <b>12345-67890</b>, <b>Spongebob</b> and <b>Squarepants</b>. That action will result in a call to the method <tt>openCheckingAccountUnderTheNameOf()</tt> on the fixture with the parameters <tt>12345-67890</tt>, <tt>Spongebob</tt> and <tt>Squarepants</tt>.</p>

<p>The third table indicates to check the result of the action <em><b>that balance of account is</b></em> on the system under development with the expected value <b>$0.00</b>. That action results in a call to the method <tt>thatBalanceOfAccountIs</tt> on the fixture with the parameter <tt>12345-67890</tt>. That method is expected to return a value, which will be asserted for equality against the domain representation for the value <tt>$0.00</tt>.</p>

<p>The fixture code to support this example in Java is the class <tt>BankFixture</tt> shown below. </p>

<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<div class="code"><div class="codeHeader"><b>Code for the Bank fixture</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class BankFixture 
{
    <span class="code-keyword">private</span> Bank bank;

    <span class="code-keyword">public</span> BankFixture()
    {
        bank = <span class="code-keyword">new</span> Bank();
    }

    <span class="code-keyword">public</span> <span class="code-object">boolean</span> openCheckingAccountUnderTheNameOf(<span class="code-object">String</span> number, <span class="code-object">String</span> firstName, <span class="code-object">String</span> lastName)
    {
        <span class="code-keyword">return</span> bank.openCheckingAccount(number, <span class="code-keyword">new</span> Owner(firstName, lastName)) != <span class="code-keyword">null</span>;
    }

    <span class="code-keyword">public</span> Money thatBalanceOfAccountIs(<span class="code-object">String</span> accountNumber) <span class="code-keyword">throws</span> Exception
    {
        BankAccount account = bank.getAccount(accountNumber);
        <span class="code-keyword">return</span> account.getBalance();
    }
}</pre>
</div></div>

<p>That class follows the general rules of fixtures described in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/1.+Fixtures+Conventions" title="1. Fixtures Conventions">1. Fixtures Conventions</a>. It provides public instance methods <tt>openCheckingAccount</tt> and <tt>thatBalanceOfAccount</tt> to map respectively to the actions <em><b>open checking account</b></em> and <em><b>that balance of account</b></em>.</p>

<table style="display:none">
	<tr>
		<td>Begin Info</td>
	</tr>
</table>
<div style="padding:0px; margin:0px; ">
		

<table cellpadding='5' width='85%' cellspacing='8px' class='infoMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Note</b><br />
<p>The fixture does not much except from delegating the processing to the application code, in this case the <tt>Bank</tt> class.</p></td></tr></table>

</div>
<table style="display:none">
	<tr>
		<td>End Info</td>
	</tr>
</table>


<div class="code"><div class="codeHeader"><b>Code for the Bank application code</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class Bank {

    <span class="code-keyword">private</span> <span class="code-keyword">final</span> HashMap&lt;<span class="code-object">String</span>, BankAccount&gt; accounts;

    <span class="code-keyword">public</span> Bank()
    {
        accounts = <span class="code-keyword">new</span> HashMap&lt;<span class="code-object">String</span>, BankAccount&gt;();
    }

    <span class="code-keyword">public</span> <span class="code-object">boolean</span> hasAccount(<span class="code-object">String</span> accountNumber)
    {
        <span class="code-keyword">return</span> accounts.containsKey(accountNumber);
    }

    <span class="code-keyword">public</span> BankAccount getAccount(<span class="code-object">String</span> accountNumber) <span class="code-keyword">throws</span> NoSuchAccountException
    {
         <span class="code-keyword">if</span> (!hasAccount(accountNumber)
             <span class="code-keyword">throw</span> <span class="code-keyword">new</span> NoSuchAccountException(accountNumber);
         <span class="code-keyword">return</span> accounts.get(accountNumber);
    }

    <span class="code-keyword">public</span> CheckingAccount openCheckingAccount(<span class="code-object">String</span> number, Owner owner)
    {
        <span class="code-keyword">if</span> (hasAccount(number)) <span class="code-keyword">return</span> <span class="code-keyword">null</span>;

        CheckingAccount account = <span class="code-keyword">new</span> CheckingAccount(number, owner);
        accounts.put(number, account);
        <span class="code-keyword">return</span> account;
    }
}</pre>
</div></div>

<h4 id="Fulldeveloperguide-HTML-Howistheexampleinterpreted%3F">How is the example interpreted?</h4>

<p>When it runs this example, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> reads the first table to decide on the <em>interpreter</em> and <em>fixture</em> to use and start testing from the second table, which is the first test table. </p>

<p>The second table is a <em>default action</em>, which <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> carries out in the following sequence of steps:</p>

<table style="display:none">
	<tr>
		<td>Begin Info</td>
	</tr>
</table>
<div style="padding:0px; margin:0px; ">
		

<ol>
	<li>It calls the method <tt>openCheckingAccountUnderTheNameOf()</tt> with the parameters <tt>12345-67890</tt>, <tt>Spongebob</tt> and <tt>Squarepants</tt></li>
	<li>Since the method returns <tt>true</tt>, indicating a success, it marks the keyword cells as <em>right</em>, resulting in the first cell of the row being colored green.</li>
</ol>


<p>The third table is a <em>check action</em>, which <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> carries out in the following sequence of steps:</p>

<ol>
	<li>It calls the method <tt>thatBalanceOfAccountIs()</tt> with the parameter <tt>12345-67890</tt> to get the value calculated by the system under test</li>
	<li>This is a <em><b>check</b></em> action, so it reads the value $0.00 from the last cell of the row and compares it to the value returned by the fixture. Since the values are equal, it annotates the last cell as <em>right</em>, which results in the cell being colored green.</li>
</ol>


<h4 id="Fulldeveloperguide-HTML-Whathappensforotherreturntypes%3F">What happens for other return types?</h4>

<h5 id="Fulldeveloperguide-HTML-DefaultRows">Default Rows</h5>

<p>Depending on the value returned by the system under test, <em>default actions</em> will annotate keyword cells following these rules:</p>

<ul>
	<li>If the value is <tt>true</tt>, it annotates keyword cells right, making them appear green.</li>
	<li>If the value is <tt>false</tt> - indicating a failure - it annotates keywords cells wrong, making them appear red.</li>
	<li>If the action throws an exception, it annotates the first keyword as an exception, making it appear yellow and display a stack trace of the error.</li>
	<li>If the action returns another value or nothing, it ignores the result.</li>
</ul>


<h5 id="Fulldeveloperguide-HTML-CheckRows">Check Rows</h5>

<p>Depending on the value returned by the system under test, <em>check actions</em> will annotate the row following these rules:</p>

<ul>
	<li>If the returned value matches the expected value, it annotates the last cell right, making it appear green.</li>
	<li>If the action returns nothing or a value that does not match the expected value - indicating a failure - it annotates the last cell wrong, making it appear red.</li>
	<li>If the action throws an exception, it annotates the first keyword as an exception, making it appear yellow and display a stack trace of the error.</li>
</ul>


</div>
<table style="display:none">
	<tr>
		<td>End Info</td>
	</tr>
</table>


<h3 id="Fulldeveloperguide-HTML-BuildingontheBankexample">Building on the Bank example</h3>

<p>The second example in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Do+With+specification" title="Writing a Do With specification">Writing a Do With specification</a>, shown again below, presents a more complete business flow using the bank fixture.</p>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> do with </td>
<td class='confluenceTd'> bank </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> open checking account </td>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> under the name of </td>
<td class='confluenceTd'> Spongebob </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Squarepants </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> check </td>
<td class='confluenceTd'> that balance of account </td>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> is </td>
<td class='confluenceTd'> $0.00 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> deposit </td>
<td class='confluenceTd'> $100.00 </td>
<td class='confluenceTd'> in account </td>
<td class='confluenceTd'> 12345-67890 </td>
</tr>
<tr>
<td class='confluenceTd'> check </td>
<td class='confluenceTd'> that balance of account </td>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> is </td>
<td class='confluenceTd'> $100.00 </td>
</tr>
<tr>
<td class='confluenceTd'> withdraw </td>
<td class='confluenceTd'> $50.00 </td>
<td class='confluenceTd'> from account </td>
<td class='confluenceTd'> 12345-67890 </td>
</tr>
<tr>
<td class='confluenceTd'> check </td>
<td class='confluenceTd'> that balance of account </td>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> is </td>
<td class='confluenceTd'> $50.00 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> reject</td>
<td class='confluenceTd'> withdraw </td>
<td class='confluenceTd'> $75.00 </td>
<td class='confluenceTd'> from account </td>
<td class='confluenceTd'> 12345-67890 </td>
</tr>
<tr>
<td class='confluenceTd'> check </td>
<td class='confluenceTd'> that balance of account </td>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> is </td>
<td class='confluenceTd'> $50.00 </td>
</tr>
<tr>
<td class='confluenceTd'> accept </td>
<td class='confluenceTd'> withdraw </td>
<td class='confluenceTd'> $25.00 </td>
<td class='confluenceTd'>from account </td>
<td class='confluenceTd'> 12345-67890 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> end </td>
</tr>
</tbody></table>

<p>The fourth and last example tables contain more several rows. In a sequence of actions, all of the rows in a table are executed, so several actions can be grouped in a table if that helps improve clarity.</p>

<p>In the first row of the last table, notice the use of the <em>reject</em> special keyword in the first cell. This indicates that the action for the row is expected to fail by either returning <tt>false</tt> or throwing an exception.</p>

<p>In the last row of the last table, the <em>accept</em> special keyword is used to indicate that we expect the last call to succeed. Accept is the opposite of reject. That is, the last withdraw should not return <tt>false</tt> nor throw an exception. </p>

<table style="display:none">
	<tr>
		<td>Begin Info</td>
	</tr>
</table>
<div style="padding:0px; margin:0px; ">
		

<h5 id="Fulldeveloperguide-HTML-RejectRows">Reject Rows</h5>

<p>Depending on the value returned by the system under test, <em>reject actions</em> will annotate the row following these rules:</p>

<ul>
	<li>If the action returns <tt>false</tt> or throws an exception - indicating a success - it annotates the reject keyword right, making it appear green.</li>
	<li>If the returned value is anything else or nothing - indicating a failure - , it annotates the reject keyword wrong, making it appear red.</li>
</ul>


<h5 id="Fulldeveloperguide-HTML-AcceptRows">Accept Rows</h5>

<p>Depending on the value returned by the system under test, <em>accept actions</em> will annotate the row following these rules:</p>

<ul>
	<li>If the returned value is anything except <tt>false</tt> or an exception - indicating a success -, it annotates the accept keyword right, making it appear green.</li>
	<li>If the action returns false or throws an exception - indicating a failure - it annotates the accept keyword wrong, making it appear red.</li>
</ul>


</div>
<table style="display:none">
	<tr>
		<td>End Info</td>
	</tr>
</table>


<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<p>The supporting code is here:</p>

<div class="code"><div class="codeHeader"><b>Code for the Bank fixture</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class BankFixture 
{
    <span class="code-keyword">private</span> Bank bank;

    <span class="code-keyword">public</span> BankFixture()
    {
        bank = <span class="code-keyword">new</span> Bank();
    }

    <span class="code-keyword">public</span> <span class="code-object">boolean</span> openCheckingAccountUnderTheNameOf(<span class="code-object">String</span> number, <span class="code-object">String</span> firstName, <span class="code-object">String</span> lastName)
    {
        <span class="code-keyword">return</span> bank.openCheckingAccount(number, <span class="code-keyword">new</span> Owner(firstName, lastName)) != <span class="code-keyword">null</span>;
    }

    <span class="code-keyword">public</span> Money thatBalanceOfAccountIs(<span class="code-object">String</span> accountNumber) <span class="code-keyword">throws</span> Exception
    {
        BankAccount account = bank.getAccount(accountNumber);
        <span class="code-keyword">return</span> account.getBalance();
    }

    <span class="code-keyword">public</span> void depositInAccount(Money amount, <span class="code-object">String</span> accountNumber) <span class="code-keyword">throws</span> Exception
    {
        bank.deposit(amount, accountNumber);
    }
    
    <span class="code-keyword">public</span> <span class="code-object">boolean</span> withdrawFromAccount(Money amount, <span class="code-object">String</span> accountNumber) <span class="code-keyword">throws</span> Exception
    {
        <span class="code-keyword">return</span> withdrawFromAccountUsing( amount, accountNumber, WithdrawType.ATM );
    }

    <span class="code-keyword">public</span> <span class="code-object">boolean</span> withdrawFromAccountUsing(Money amount, <span class="code-object">String</span> accountNumber, WithdrawType withdrawType) <span class="code-keyword">throws</span> Exception
    {
        <span class="code-keyword">try</span>
        {
            bank.withdraw(amount, accountNumber, withdrawType);
        }
        <span class="code-keyword">catch</span> (Exception e)
        {
            <span class="code-keyword">return</span> <span class="code-keyword">false</span>;
        }
        <span class="code-keyword">return</span> <span class="code-keyword">true</span>;
    }

    <span class="code-keyword">public</span> Collection getOpenedAccounts()
    {
        <span class="code-keyword">return</span> bank.getAccounts();
    }
}</pre>
</div></div>

<h3 id="Fulldeveloperguide-HTML-Combiningwithothertypesofrules">Combining with other types of rules</h3>

<p>An interesting characteristic of the <tt>DoWithInterpreter</tt> is the ability to delegate processing of part of the table to another interpreter. </p>

<p>If an interpreter is specified in the first cell of a row, the remainder of the table will be processed by that interpreter. The action for the row must return a fixture that will be used to interpret the rest of the table.</p>

<p>In the example show below, the first row of the second table indicates to process the rest of the table using a <tt>SetOfInterpreter</tt> on the value returned by the action <em>opened accounts</em>.</p>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> do with </td>
<td class='confluenceTd'> bank </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> open checking account </td>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> under the name of </td>
<td class='confluenceTd'> Spongebob </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Squarepants </td>
</tr>
<tr>
<td class='confluenceTd'> open savings account </td>
<td class='confluenceTd'> 54321-09876 </td>
<td class='confluenceTd'> under the name of </td>
<td class='confluenceTd'> Patrick </td>
<td class='confluenceTd'>&nbsp;</td>
<td class='confluenceTd'> Star </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> set of </td>
<td class='confluenceTd'> opened accounts </td>
</tr>
<tr>
<td class='confluenceTd'> number </td>
<td class='confluenceTd'> type </td>
<td class='confluenceTd'> owner name </td>
</tr>
<tr>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> checking </td>
<td class='confluenceTd'> Spongebob Squarepants</td>
</tr>
<tr>
<td class='confluenceTd'> 54321-09876 </td>
<td class='confluenceTd'> savings </td>
<td class='confluenceTd'> Patrick Star </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> end </td>
</tr>
</tbody></table>

<table style="display:none">
	<tr>
		<td>Begin Info</td>
	</tr>
</table>
<div style="padding:0px; margin:0px; ">
		

<h5 id="Fulldeveloperguide-HTML-InterpretRows">Interpret Rows</h5>

<p>Depending on the value returned by the system under test, <em>interpret actions</em> will annotate the row following these rules:</p>

<ul>
	<li>If the returned value is an object, it uses the interpreter specified in the first cell on that object to interpret the remainder of the table. The row is not annotated.</li>
	<li>If the action returns nothing, it uses the interpreter without any fixture to interpret the remainder of the table. The row is not annotated.</li>
	<li>If the action throws an exception - indicating a failure - it annotates the first action keyword as exception, making appear yellow and display a stack trace of the error. The remainder of the table is not interpreted.</li>
</ul>


</div>
<table style="display:none">
	<tr>
		<td>End Info</td>
	</tr>
</table>

<h1 id="Fulldeveloperguide-HTML-7.ScenarioFixture">7. Scenario Fixture</h1>

<h2 id="Fulldeveloperguide-HTML-Definition">Definition</h2>

<div class="panel" style="border-style: solid; border-color: #000000; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #000000; background-color: #c0c0c0; "><b>DEFINITION</b></div><div class="panelContent" style="background-color: #ffffff; ">
<p>The <tt>ScenarioInterpreter</tt> is used to express interactions with the system under development that must be performed in a particular order. This form of specification provides information about the business flow.</p>

<p>When a sequence of action is executed, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> confirms that each action has successfully been performed.</p>

<hr />
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> Scenario </td>
<td class='confluenceTd'> <font color="blue"></font> <em>Identification of the set of rule</em> <font color="blue"></font> </td>
</tr>
<tr>
<td class='confluenceTd'> Action 1 </td>
</tr>
<tr>
<td class='confluenceTd'> Action 2 </td>
</tr>
<tr>
<td class='confluenceTd'> ... </td>
</tr>
<tr>
<td class='confluenceTd'> Action i </td>
</tr>
</tbody></table>
<hr />

<ul>
	<li>As for all other interpreters, the first row of the <tt>ScenarioInterpreter</tt> specifies the name of the interpreter and the name of the sequence of actions to be tested. What makes the <tt>ScenarioInterpreter</tt> particular is that it only have to be defined once for all the sequences of actions expressed in a page. Obviously, the <tt>ScenarioInterpreter</tt> must be define before any sequence of actions.</li>
	<li>The <tt>ScenarioInterpreter</tt> may also be expressed in Bullet List form or Number List form.</li>
</ul>
</div></div>

<h3 id="Fulldeveloperguide-HTML-Coloring">Coloring</h3>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will visually show the test result by coloring a complete row or words inside the row:</p>

<div class="panel"><div class="panelHeader" style="background-color: #98FB98; "><b><b>GREEN</b></b></div><div class="panelContent" style="background-color: #98FB98; ">
<p>When the action has been executed successfully, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> color the row or words inside the row in green.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F08080; "><b><b>RED</b></b></div><div class="panelContent" style="background-color: #F08080; ">
<p>If the action execution has failed, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> color the the row or words inside the row in red.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F0E68C; "><b><b>YELLOW</b></b></div><div class="panelContent" style="background-color: #F0E68C; ">
<p>If the system encounters an execution error, the row is colored yellow and <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> provides information about the error.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #CCCCCC; "><b><b>GRAY</b></b></div><div class="panelContent" style="background-color: #CCCCCC; ">
<p>When the action has been executed successfully, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will display the returned value in gray.</p>
</div></div>
<h2 id="Fulldeveloperguide-HTML-WritingfixturesforScenariotables">Writing fixtures for Scenario tables</h2>

<p>As we've seen in the <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Scenario+definition" title="Scenario definition">Scenario definition</a>, a sequence of tables is used to express a business flow in the application under development.</p>

<p>When running the table,</p>
<img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/>
<p>uses a fixture to mediate between the example expressed in the sequence of tables and the system under development. The fixture code defines how the specific actions are mapped to the application code.
<br clear="all" /></p>

<p>This page shows the fixture code that supports the examples introduced in the <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Scenario+specification" title="Writing a Scenario specification">Writing a Scenario specification</a>.</p>

<h3 id="Fulldeveloperguide-HTML-FixtureforBank">Fixture for Bank</h3>

<p>Consider the first example of business flow described in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Scenario+specification" title="Writing a Scenario specification">Writing a Scenario specification</a>, shown again below.</p>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> scenario </td>
<td class='confluenceTd'> bank </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> open checking account 12345-67890 under the name of Spongebob Squarepants </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> verify that balance of account 12345-67890 is $0.00 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> end </td>
</tr>
</tbody></table>
<p>The first table indicates to use a <tt>ScenarioInterpreter</tt>, which handles a business flow expressed as a sequence of tables. The fixture <tt>Bank</tt> will do the mediation with the application under development.</p>

<p>The interpreter will run all the tables until the end of the document. In this case, the second and third tables compose the business flow example.</p>

<p>The second table indicates to perform the action of <em>opening a</em> <b><em>checking</em></b> <em>account</em> <b><em>12345-67890</em></b> <em>under the name of</em> <b><em>Spongebob Squarepants</em></b> on the system under development. That action will result in a call to a method from the <tt>Bank</tt> fixture. The method will be found using <b>Regular Expression</b> assigned to an annotation.</p>

<hr />
<h4 id="Fulldeveloperguide-HTML-Annotation%26RegularExpression">Annotation &amp; Regular Expression</h4>

<p>To resolve the method to call, the <tt>ScenarioInterpreter</tt> will look at all fixture methods annotated with the following annotations and will try to match the action <em>content</em> to the regular expression on it. Parameters will be captured by the regular expression itself (using capture group).</p>
<table cellpadding='5' width='85%' cellspacing='8px' class='infoMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Annotation with .Net</b><br />
<p>.Net annotation are in fact <b>Attribute</b> and are declared like <b>[</b><b><em>Given</em></b><b>]</b>.</p></td></tr></table>

<h5 id="Fulldeveloperguide-HTML-@Given">@Given</h5>

<div class="preformatted"><div class="preformattedContent">
<pre>@Given("[regular expression]")
</pre>
</div></div>
<p>A <b>Given</b> annotation will be use when you need to put the system in a know state before a user interact with it.  A good example will be to prepare the data in the system to be available for the next action calls.  In our Bank example, this will represent the opening of the checking account action.</p>

<h5 id="Fulldeveloperguide-HTML-@When">@When</h5>

<div class="preformatted"><div class="preformattedContent">
<pre>@When("[regular expression]")
</pre>
</div></div>
<p>A <b>When</b> annotation will be use for <em>transiting</em> the system to another state.  A good example will be to interact with the system.  In our Bank example this will represent deposit or withdraw actions.</p>

<h5 id="Fulldeveloperguide-HTML-@Then">@Then</h5>

<div class="preformatted"><div class="preformattedContent">
<pre>@Then("[regular expression]")
</pre>
</div></div>
<p>A <b>Then</b> annotation will be use to verify the result of interactions on the system.  A good example will be to check if an event has been raised.  In our Bank example, this will represent the verification of the balance account.</p>

<h5 id="Fulldeveloperguide-HTML-@Check">@Check</h5>

<div class="preformatted"><div class="preformattedContent">
<pre>@Check("[regular expression]")
</pre>
</div></div>
<p>A <b>Check</b> annotation will be use to verify the result of the action (boolean result equality).  A good example will be to check if we can proceed with an action. In our Bank example, this will represent the verification whenever we can withdraw a certain amount.</p>

<h5 id="Fulldeveloperguide-HTML-@Display">@Display</h5>

<div class="preformatted"><div class="preformattedContent">
<pre>@Display("[regular expression]")
</pre>
</div></div>
<p>A <b>Display</b> annotation will be use to show the result of the action (the actual result). The displayed value is only for information purpose.  A good example will be to show an internal value.  In our Bank example, this will represent showing the actual balance account.</p>

<hr />
<p>If we continue with our example, the third table indicates to verify the balance account against the expected value <b>$0.00</b>.  Here, we introduce a verification for an <em>expected</em> value and the <em>actual</em> value.  This will be done using the <tt>Expectaction</tt> object as a parameter of the method to be call.</p>

<p>The fixture code to support this example in Java is the class <tt>BankFixture</tt> shown below.</p>

<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<div class="code"><div class="codeHeader"><b>Code for the Bank fixture using annotations for the Scenario Interpreter</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class BankFixture
{
    <span class="code-keyword">private</span> Bank bank;

    <span class="code-keyword">public</span> BankFixture()
    {
        bank = <span class="code-keyword">new</span> Bank();
    }

    @Given(<span class="code-quote">"open (\\w+) account (\\d{5}\\-\\d{5}) under the name of ([\\w|\\s]*)"</span>)
    <span class="code-keyword">public</span> void openAccount(<span class="code-object">String</span> type, <span class="code-object">String</span> number, Owner owner)
    {
        <span class="code-keyword">if</span> (<span class="code-quote">"checking"</span>.equals( type ))
        {
            bank.openCheckingAccount( number, owner );
        }
        <span class="code-keyword">else</span> <span class="code-keyword">if</span> (<span class="code-quote">"savings"</span>.equals( type ))
        {
            bank.openSavingsAccount( number, owner );
        }
    }

    @Then(<span class="code-quote">"verify that balance of account (\\d{5}\\-\\d{5}) is (\\$\\d+\\.\\d\\d)"</span>)
    <span class="code-keyword">public</span> void theBalanceOfAccount(<span class="code-object">String</span> number, Expectation expectedBalance) <span class="code-keyword">throws</span> NoSuchAccountException
    {
        Money actualBalance = bank.getAccount( number ).getBalance();
        expectedBalance.setActual( actualBalance );
    }
}</pre>
</div></div>
<p>That class follows the general rules of fixtures described in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/1.+Fixtures+Conventions" title="1. Fixtures Conventions">1. Fixtures Conventions</a>.</p>
<table cellpadding='5' width='85%' cellspacing='8px' class='infoMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Note</b><br />
<p>The fixture does not much except from delegating the processing to the application code, in this case the <tt>Bank</tt> class.</p></td></tr></table>
<div class="code"><div class="codeHeader"><b>Code for the Bank application code</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class Bank {

    <span class="code-keyword">private</span> <span class="code-keyword">final</span> HashMap&lt;<span class="code-object">String</span>, BankAccount&gt; accounts;

    <span class="code-keyword">public</span> Bank()
    {
        accounts = <span class="code-keyword">new</span> HashMap&lt;<span class="code-object">String</span>, BankAccount&gt;();
    }

    <span class="code-keyword">public</span> <span class="code-object">boolean</span> hasAccount(<span class="code-object">String</span> accountNumber)
    {
        <span class="code-keyword">return</span> accounts.containsKey(accountNumber);
    }

    <span class="code-keyword">public</span> BankAccount getAccount(<span class="code-object">String</span> accountNumber) <span class="code-keyword">throws</span> NoSuchAccountException
    {
         <span class="code-keyword">if</span> (!hasAccount(accountNumber)
             <span class="code-keyword">throw</span> <span class="code-keyword">new</span> NoSuchAccountException(accountNumber);
         <span class="code-keyword">return</span> accounts.get(accountNumber);
    }

    <span class="code-keyword">public</span> CheckingAccount openCheckingAccount(<span class="code-object">String</span> number, Owner owner)
    {
        <span class="code-keyword">if</span> (hasAccount(number)) <span class="code-keyword">return</span> <span class="code-keyword">null</span>;

        CheckingAccount account = <span class="code-keyword">new</span> CheckingAccount(number, owner);
        accounts.put(number, account);
        <span class="code-keyword">return</span> account;
    }
}</pre>
</div></div>

<h4 id="Fulldeveloperguide-HTML-Howistheexampleinterpreted%3F">How is the example interpreted?</h4>

<p>When it runs this example,</p>
<img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/>
<p>reads the first table to decide on the <em>interpreter</em> and <em>fixture</em> to use and start testing from the second table, which is the first test table.
<br clear="all" /></p>

<p>The second table is an action which</p>
<img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/>
<p>carries out in the following sequence of steps:
<br clear="all" /></p>
<ol>
	<li>Find a method that match the action <em>content</em> using regular expression defined on annotated method</li>
	<li>The parameter <tt>Owner</tt> will be instanciated by the type conversion facility and will contains <tt>Spongebob</tt> and <tt>Squarepants</tt></li>
	<li>It calls the method <tt>openAccount()</tt> with the parameters <tt>12345-67890</tt> and the <tt>Owner</tt> object instance</li>
	<li>The behavior will be applied by the type of the annotation.  In this case, it is a <b><em>Given</em></b> annotation and the row will <b>not</b> be colored green (except if an exception occur, the row will be colored red).</li>
</ol>


<p>The third table is an action which</p>
<img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/>
<p>carries out in the following sequence of steps:
<br clear="all" /></p>
<ol>
	<li>Find a method that match the action <em>content</em> using regular expression defined on annotated method</li>
	<li>It calls the method <tt>theBalanceOfAccount()</tt> with the parameter <tt>12345-67890</tt> to get the value calculated by the system under test and the <tt>Expectation</tt> object instance</li>
	<li>This is a <b><em>Then</em></b> annotation. The method will set the <em>actual</em> value on the <tt>Expectation</tt> object instance. GreenPepper will then verify the <tt>Expectation</tt> object to see if it match the value $0.00.  If the values are equal, it annotates the value $0.00 as <em>right</em> (green) or <em>wrong</em> (red) if not</li>
</ol>


<h3 id="Fulldeveloperguide-HTML-BuildingontheBankexample">Building on the Bank example</h3>

<p>The second example in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Scenario+specification" title="Writing a Scenario specification">Writing a Scenario specification</a>, shown again below, presents a more complete business flow using the bank fixture.</p>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> Scenario </td>
<td class='confluenceTd'> bank </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> open checking account 12345-67890 under the name of Spongebob Squarepants </td>
</tr>
<tr>
<td class='confluenceTd'> verify that balance of account 12345-67890 is $0.00 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> deposit $100.00 in account 12345-67890 </td>
</tr>
<tr>
<td class='confluenceTd'> verify that balance of account 12345-67890 is $100.00 </td>
</tr>
<tr>
<td class='confluenceTd'> withdraw $50.00 from account 12345-67890 </td>
</tr>
<tr>
<td class='confluenceTd'> verify that balance of account 12345-67890 is $50.00 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> can't withdraw $75.00 from account 12345-67890 </td>
</tr>
<tr>
<td class='confluenceTd'> verify that balance of account 12345-67890 is $50.00 </td>
</tr>
<tr>
<td class='confluenceTd'> can withdraw $25.00 from account 12345-67890 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> end </td>
</tr>
</tbody></table>
<p>The fourth and last example tables contain more several rows. In a sequence of actions, all of the rows in a table are executed, so several actions can be grouped in a table if that helps improve clarity.</p>

<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<p>The supporting code is here:</p>
<div class="code"><div class="codeHeader"><b>Code for the Bank fixture</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class BankFixture
{
    <span class="code-keyword">private</span> Bank bank;

    <span class="code-keyword">public</span> BankFixture()
    {
        bank = <span class="code-keyword">new</span> Bank();
    }

    <span class="code-keyword">public</span> BankFixture()
    {
        <span class="code-keyword">this</span>.bank = <span class="code-keyword">new</span> Bank();
    }

    @Given(<span class="code-quote">"open (\\w+) account (\\d{5}\\-\\d{5}) under the name of ([\\w|\\s]*)"</span>)
    <span class="code-keyword">public</span> void openAccount(<span class="code-object">String</span> type, <span class="code-object">String</span> number, Owner owner)
    {
        <span class="code-keyword">if</span> (<span class="code-quote">"checking"</span>.equals( type ))
        {
            bank.openCheckingAccount( number, owner );
        }
        <span class="code-keyword">else</span> <span class="code-keyword">if</span> (<span class="code-quote">"savings"</span>.equals( type ))
        {
            bank.openSavingsAccount( number, owner );
        }
    }

    @Then(<span class="code-quote">"verify that balance of account (\\d{5}\\-\\d{5}) is (\\$\\d+\\.\\d\\d)"</span>)
    <span class="code-keyword">public</span> void theBalanceOfAccount(<span class="code-object">String</span> number, Expectation expectedBalance)
            <span class="code-keyword">throws</span> NoSuchAccountException
    {
        Money actualBalance = bank.getAccount( number ).getBalance();
        expectedBalance.setActual( actualBalance );
    }

    @When(<span class="code-quote">"deposit (\\$\\d+\\.\\d\\d) in account (\\d{5}\\-\\d{5})"</span>)
    <span class="code-keyword">public</span> void deposit(Money amount, <span class="code-object">String</span> number)
            <span class="code-keyword">throws</span> Exception
    {
        bank.deposit( amount, number );
    }

    @When(<span class="code-quote">"withdraw (\\$\\d+\\.\\d\\d) from account (\\d{5}\\-\\d{5})"</span>)
    <span class="code-keyword">public</span> void withdraw(Money amount, <span class="code-object">String</span> number)
            <span class="code-keyword">throws</span> Exception
    {
        bank.withdraw( amount, number, WithdrawType.ATM );
    }

    @Check(<span class="code-quote">"can't withdraw (\\$\\d+\\.\\d\\d) from account (\\d{5}\\-\\d{5})"</span>)
    <span class="code-keyword">public</span> <span class="code-object">boolean</span> cannotWithdraw(Money amount, <span class="code-object">String</span> number)
    {
        <span class="code-keyword">try</span>
        {
            bank.withdraw( amount, number, WithdrawType.ATM );
            <span class="code-keyword">return</span> <span class="code-keyword">false</span>;
        }
        <span class="code-keyword">catch</span> (Exception e)
        {
            <span class="code-keyword">return</span> <span class="code-keyword">true</span>;
        }
    }

    @Check(<span class="code-quote">"can withdraw (\\$\\d+\\.\\d\\d) from account (\\d{5}\\-\\d{5})"</span>)
    <span class="code-keyword">public</span> <span class="code-object">boolean</span> canWithdraw(Money amount, <span class="code-object">String</span> number)
    {
        <span class="code-keyword">try</span>
        {
            bank.withdraw( amount, number, WithdrawType.ATM );
            <span class="code-keyword">return</span> <span class="code-keyword">true</span>;
        }
        <span class="code-keyword">catch</span> (Exception e)
        {
            <span class="code-keyword">return</span> <span class="code-keyword">false</span>;
        }
    }

    <span class="code-keyword">public</span> Collection&lt;BankAccount&gt; getOpenedAccounts()
    {
        <span class="code-keyword">return</span> bank.getAccounts();
    }
}</pre>
</div></div>

<h3 id="Fulldeveloperguide-HTML-Combiningwithothertypesofrules">Combining with other types of rules</h3>

<p>An interesting characteristic of the <tt>ScenarioInterpreter</tt> is the ability to delegate processing of part of the table to another interpreter.</p>

<p>If an interpreter is specified in the first cell of a row, the remainder of the table will be processed by that interpreter. The action for the row must return a fixture that will be used to interpret the rest of the table.</p>

<p>In the example show below, the first row of the second table indicates to process the rest of the table using a <tt>SetOfInterpreter</tt> on the value returned by the action <em>opened accounts</em>.</p>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> Scenario </td>
<td class='confluenceTd'> bank </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> open checking account 12345-67890 under the name of Spongebob Squarepants </td>
</tr>
<tr>
<td class='confluenceTd'> open savings account 54321-09876 under the name of Patrick Star </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> set of </td>
<td class='confluenceTd'> opened accounts </td>
</tr>
<tr>
<td class='confluenceTd'> number </td>
<td class='confluenceTd'> type </td>
<td class='confluenceTd'> owner name </td>
</tr>
<tr>
<td class='confluenceTd'> 12345-67890 </td>
<td class='confluenceTd'> checking </td>
<td class='confluenceTd'> Spongebob Squarepants </td>
</tr>
<tr>
<td class='confluenceTd'> 54321-09876 </td>
<td class='confluenceTd'> savings </td>
<td class='confluenceTd'> Patrick Star </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'> end </td>
</tr>
</tbody></table>

<h3 id="Fulldeveloperguide-HTML-Liveexample">Live example</h3>

<p>See a live example <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GREENPEPPERDEMO/Bank+Scenario" title="Bank Scenario">here</a>.</p>
<h1 id="Fulldeveloperguide-HTML-6.Contextdefinition%28Setup%29">6. Context definition (Setup)</h1>
<h2 id="Fulldeveloperguide-HTML-Definition">Definition</h2>
<div class="panel" style="border-style: solid; border-color: #000000; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #000000; background-color: #c0c0c0; "><b>DEFINITION</b></div><div class="panelContent" style="background-color: #ffffff; ">
<p>The <tt>SetUpInterpreter</tt> is used to simplify the creation of a particular state for the system under development. Once the state is created, we can focus on the business process to test.</p>

<p>When a setup table is executed, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> enter data in the system under development to create the desired state.</p>

<p><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/download/attachments/158827477/LexicalFormOfSetUp.jpg" align="absmiddle" border="0" /></p>

<ul>
	<li>The first row of the table indicates the name of the interpreter and the name of the desired state.</li>
	<li>The second row is called the header row and serves to identify the data to be inserted in the system under development.</li>
	<li>Finally, the remaining rows captures the data to be inserted.</li>
</ul>
</div></div>


<h3 id="Fulldeveloperguide-HTML-Coloring">Coloring</h3>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will visually show the test result by coloring each testing cell:</p>

<div class="panel"><div class="panelHeader" style="background-color: #98FB98; "><b><b>GREEN</b></b></div><div class="panelContent" style="background-color: #98FB98; ">
<p>When the insertion has been executed successfully, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> add a green cell at the end of the data row with the word <b>entered</b>.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F08080; "><b><b>RED</b></b></div><div class="panelContent" style="background-color: #F08080; ">
<p>If the insertion has failed because the values specified does not respect a business rule, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> add a red cell at the end of the row with the word <b>not entered</b>.</p>
</div></div>
<div class="panel"><div class="panelHeader" style="background-color: #F0E68C; "><b><b>YELLOW</b></b></div><div class="panelContent" style="background-color: #F0E68C; ">
<p>If the insertion has failed because a specified value generates an error, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> colors the cell of the data in error yellow and provides information about the error. <br/>
If the system encounters an error not related to a specific data, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> add a yellow cell at the end of the data row and provides information about the error.</p>
</div></div>
<h1 id="Fulldeveloperguide-HTML-WritingfixturesforSetuptables">Writing fixtures for Setup tables</h1>

<p>As we've seen in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Setup+definition" title="Setup definition">Setup Definition</a>, a table of rules is used to simplify the creation of a particular state for the system under development. Once the state is created, we can focus on the business process to test.</p>

<p>This page shows the fixture code that supports the examples introduced in the <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Setup+specification" title="Writing a Setup specification">Writing a Setup specification</a>.</p>

<h3 id="Fulldeveloperguide-HTML-Fixturetocreatebankcustomers">Fixture to create bank customers</h3>

<p>Consider the example of setup table described in <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Writing+a+Setup+specification" title="Writing a Setup specification">Writing a Setup specification</a>:</p>
<table style="display:none">
	<tr>
		<td>Import</td>
	</tr>
			<tr>
			<td>com.greenpepper.samples.application.bank</td>
		</tr>
	</table>
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'>setup</td>
<td class='confluenceTd'> a group of customers</td>
</tr>
<tr>
<td class='confluenceTd'>  number </td>
<td class='confluenceTd'> type </td>
<td class='confluenceTd'> first name</td>
<td class='confluenceTd'> last name</td>
<td class='confluenceTd'> balance</td>
</tr>
<tr>
<td class='confluenceTd'> 11111-11111 </td>
<td class='confluenceTd'>checking </td>
<td class='confluenceTd'> Fred </td>
<td class='confluenceTd'> Flintstone </td>
<td class='confluenceTd'> $250.00</td>
</tr>
<tr>
<td class='confluenceTd'> 22222-22222 </td>
<td class='confluenceTd'>savings </td>
<td class='confluenceTd'> Fred </td>
<td class='confluenceTd'> Flintstone </td>
<td class='confluenceTd'> $10 000.00</td>
</tr>
<tr>
<td class='confluenceTd'> 44444-44444 </td>
<td class='confluenceTd'>savings </td>
<td class='confluenceTd'> Wilma</td>
<td class='confluenceTd'> Flintstone </td>
<td class='confluenceTd'> $10 000.00</td>
</tr>
<tr>
<td class='confluenceTd'> 55555-55555 </td>
<td class='confluenceTd'>checking </td>
<td class='confluenceTd'> Barney</td>
<td class='confluenceTd'> Rubble</td>
<td class='confluenceTd'> $999.54</td>
</tr>
</tbody></table>

<p>The first cell of the first row indicates that a the <tt>SetupInterpreter</tt> will be used to interpret the table. The next cell says that the <tt>enterRow()</tt> method to use is in the fixture named <tt>AGroupOfCustomers</tt>. In Java, the name of the fixture is the name of a Java class. The <tt>enterRow()</tt> will be used to enter the data.</p>

<p>Instead of writing a method <tt>enterRow()</tt>, you can annotate the setup method with the annotation <tt>@EnterRow</tt> for Java (<tt>[EnterRow]</tt> for .Net).  This way you can have a meaningful name for the setup method.</p>

<p>The second row, also known as the header row, designates the <tt>attribute</tt> columns of the data to be inserted. In our example, <tt>number</tt>, <tt>type</tt>, <tt>first name</tt>, <tt>last name</tt> and <tt>balance</tt> are the information to be created in the system under development.</p>

<p>The fixture code to support this example in Java is the class  <tt>AGroupOfCustomersFixture</tt> shown below. </p>

<h4 id="Fulldeveloperguide-HTML-Showmethecode">Show me the code</h4>

<div class="code" style="border-style: dashed; "><div class="codeHeader" style="border-bottom-style: dashed; "><b>Code for the creation of a group of customers fixture</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class AGroupOfCustomersFixture 
{
	<span class="code-keyword">public</span> AccountType type;
	<span class="code-keyword">public</span> <span class="code-object">String</span> number, firstName, lastName;
	<span class="code-keyword">public</span> Money balance;
	<span class="code-keyword">public</span> <span class="code-keyword">static</span> Bank bank;
	
	<span class="code-keyword">public</span> AGroupOfCustomersFixture()
	{
		bank=<span class="code-keyword">new</span> Bank();
	}
	
	@EnterRow
	<span class="code-keyword">public</span> void setupAccount()
	{
		<span class="code-keyword">if</span>(AccountType.SAVINGS == type)
			bank.openSavingsAccount(number, <span class="code-keyword">new</span> Owner(firstName, lastName)).deposit(balance);
		
		<span class="code-keyword">else</span> <span class="code-keyword">if</span>(AccountType.CHECKING == type)
			bank.openCheckingAccount(number, <span class="code-keyword">new</span> Owner(firstName, lastName)).deposit(balance);
	}
}</pre>
</div></div>

<h4 id="Fulldeveloperguide-HTML-Howisthetableprocessed%3F">How is the table processed?</h4>

<p>When it runs this table, <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> reads the first row to select the <em>interpreter</em> and <em>fixture</em>. It then reads the second to know what are the attribute columns. Finally it starts creation of entries from the third row down to the end of the table.</p>

<table style="display:none">
	<tr>
		<td>Begin Info</td>
	</tr>
</table>
<div style="padding:0px; margin:0px; ">
		
<p>For the third row <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> carries out the following sequence of steps:<br/>
It assigns the data <em>11111-11111</em> to <b>number</b>, <em>checking</em> to <b>type</b>, <em>Fred</em> to <b>first name</b>, <em>Flintstone</em> to <b>last name</b> and  <em>$250.00</em> to <b>balance</b>.<br/>
It then  calls the method <tt>enterRow()</tt> of the fixture <tt>AGroupOfCustomersFixture</tt> to open a bank account with the given datas.</p>

</div>
<table style="display:none">
	<tr>
		<td>End Info</td>
	</tr>
</table>


<h1 id="Fulldeveloperguide-HTML-7.Advanceddeveloperguide">7. Advanced developer guide</h1>
<h2 id="Fulldeveloperguide-HTML-Definingacustomsystemunderdevelopment">Defining a custom system under development</h2>

<h3 id="Fulldeveloperguide-HTML-Why%3F">Why ?</h3>
<p>The system under development is a bridge between your Fixtures and the system your testing.<br/>
If you want to change the way <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> is finding/instanciating your fixtures, or if you need to hook the document execution then you can define a Custom System Under Development.</p>

<p><b>To change the system under development :</b></p>
<ul>
	<li>With GreenPepper Server : <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GP/System+Under+Test+Configuration" title="System Under Test Configuration">Server system under development configuration</a></li>
	<li>With GreenPepper Open : <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Java+command+line+options" title="Java command line options">Command line system under development configuration</a></li>
</ul>


<h2 id="Fulldeveloperguide-HTML-Usingcustomtypes">Using custom types</h2>

<p>All the examples in the documents are in strings, but fixtures want to process and return other data types.</p>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> provides a mechanism to help conversion from String to other data types and back again.</p>


<div class="panel" style="border-style: solid; border-color: #ccc; "><div class="panelHeader" style="border-bottom-style: solid; border-bottom-color: #ccc; background-color: #8CC06D; "><b>so an example that look likes</b></div><div class="panelContent" style="background-color: #FFFFCE; ">
<table class='confluenceTable'><tbody>
<tr>
<td class='confluenceTd'>rule for</td>
<td class='confluenceTd'> SomeFixture </td>
<td class='confluenceTd'> with parameter </td>
<td class='confluenceTd'> 100$</td>
</tr>
<tr>
<td class='confluenceTd'> color </td>
<td class='confluenceTd'> someBool </td>
<td class='confluenceTd'> answer </td>
</tr>
<tr>
<td class='confluenceTd'> 255,55,10 </td>
<td class='confluenceTd'> yes </td>
<td class='confluenceTd'> 14% </td>
</tr>
<tr>
<td class='confluenceTd'> 235,5,0 </td>
<td class='confluenceTd'> no </td>
<td class='confluenceTd'> 21% </td>
</tr>
</tbody></table>

<p>Will match a class with the following method</p>

<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> class SomeFixture {
   <span class="code-keyword">public</span> SomeFixture(Ammount ammount) {...}

   <span class="code-keyword">public</span> setColor(RGB color) ...
   <span class="code-keyword">public</span> someBool(<span class="code-object">boolean</span> yesNo)..
   <span class="code-keyword">public</span> Ratio answer()...
}</pre>
</div></div>
</div></div>

<p>Lets look at how <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will match these.</p>

<h2 id="Fulldeveloperguide-HTML-Converters">Converters</h2>

<p>Converters are class implementing the interface <em>com.greenpepper.converter.TypeConverter</em> in java or <em>GreenPepper.Converters.ITypeConverter</em> in C#</p>

<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">interface</span> TypeConverter
{
    <span class="code-object">boolean</span> canConvertTo( <span class="code-object">Class</span> type );

    <span class="code-object">Object</span> parse( <span class="code-object">String</span> value, <span class="code-object">Class</span> type );

    <span class="code-object">String</span> toString( <span class="code-object">Object</span> value );
}

namespace GreenPepper.Converters
{
    <span class="code-keyword">public</span> <span class="code-keyword">interface</span> ITypeConverter
    {
        bool CanConvertTo(Type type);

        object ValueOf(string value, Type type);

        string ToString(object value);
    }
}</pre>
</div></div>


<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> provides out of the box type converters for the following types</p>
<ul>
	<li>Integer</li>
	<li>Long</li>
	<li>Float</li>
	<li>Double</li>
	<li>Date</li>
	<li>Boolean</li>
	<li>Array</li>
	<li>String</li>
</ul>


<p>or their simpler form int, long ...</p>

<p>(order is important see adding a new type converter below)</p>

<p>The <em>ArrayConverter</em> calls recursively the other converters depending on the component type the array holds.</p>

<h3 id="Fulldeveloperguide-HTML-Addinganewtypeconverter">Adding a new type converter</h3>

<p>The <em>com.greenpepper.GreenPepper</em> class provides a method to add your own type converter</p>
<div class="code"><div class="codeHeader"><b>In Java</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> void register( TypeConverter converter)</pre>
</div></div>

<div class="code"><div class="codeHeader"><b>"In C#"</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> void Register( ITypeConverter converter)</pre>
</div></div>

<p>The better place to register your custom type is in a custom system under developement :</p>

<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> class CustomSystemUnderDevelopment <span class="code-keyword">extends</span> DefaultSystemUnderDevelopment
    {
        <span class="code-keyword">public</span> CustomSystemUnderDevelopment( <span class="code-object">String</span>... params )
        {
           GreenPepper.register(<span class="code-keyword">new</span> MyCustomTypeConverter());
        }
    }</pre>
</div></div>

<p>The converters are always check in an LIFO manners. If two converters can process a data type the last one that has been register will be used. That way, you can provides your own converters in place of the standard <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> converters.</p>


<h2 id="Fulldeveloperguide-HTML-Selfconversion">Self conversion</h2>

<p>Instead of registering a TypeConverter, you can uses self converting types.</p>

<p>Self converting type implies that you add a static parse method to your class.</p>
<h4 id="Fulldeveloperguide-HTML-Java">Java</h4>

<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> T parse(<span class="code-object">String</span> val);</pre>
</div></div>

<p>And then to revert back to a string,</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> <span class="code-object">String</span> toString(T value)</pre>
</div></div>

<h4 id="Fulldeveloperguide-HTML-C%23">C#</h4>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> T ValueOf(string text)</pre>
</div></div>

<p>And then to revert back to a string,</p>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> <span class="code-object">String</span> ToString(T value)</pre>
</div></div>


<p>Your class does not have to provides both of them.</p>

<h2 id="Fulldeveloperguide-HTML-Rulesofconversion">Rules of conversion</h2>

<h3 id="Fulldeveloperguide-HTML-Fromexampletofixture">From example to fixture</h3>


<p>1 First <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will verify if the type is can self convert (ie <em>public static T parse(String)</em>  or <em>public static T ValueOf(string)</em>)<br/>
2 If not, look for a registered TypeConverter that can handles the type.<br/>
3 An UnsupportedOperationException will be thrown</p>


<h3 id="Fulldeveloperguide-HTML-FromfixturereturnvaluetoString">From fixture return value to String</h3>

<p>1 First <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> will verify if the type is can self revert (ie <em>public static String toString(T)</em> or <em>public static T ToString(string)</em>)<br/>
2 If not, look for a registered TypeConverter that can handles the type.<br/>
3 Use the toString() or ToString() method on the data itself.</p>


<h2 id="Fulldeveloperguide-HTML-CustomizingGreenPepperfixtureresolution">Customizing GreenPepper fixture resolution</h2>

<h3 id="Fulldeveloperguide-HTML-Prerequisite">Prerequisite </h3>
<p>To change fixtures resolutions you need to <b><a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Defining+a+custom+system+under+development" title="Defining a custom system under development">define a custom system under development</a></b></p>

<h3 id="Fulldeveloperguide-HTML-ChanginghowisfindingyourFixtures">Changing how <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> is finding your Fixtures </h3>
<p>This could be useful when you are using for example an IOC, like Spring or just when you want to add locations (packages in java, namespaces in .Net) for <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> can resolve your fixtures.</p>

<h4 id="Fulldeveloperguide-HTML-Onlyforspecifyinglocationtoresolvefixtures%28packagesinjava%2Cnamespacesin.Net%29">Only for specifying location to resolve fixtures (packages in java, namespaces in .Net)</h4>
<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">public</span> <span class="code-keyword">static</span> class CustomSystemUnderDevelopment <span class="code-keyword">extends</span> DefaultSystemUnderDevelopment
    {
        <span class="code-keyword">public</span> CustomSystemUnderDevelopment( <span class="code-object">String</span>... params )
        {
           <span class="code-keyword">super</span>.addImport(<span class="code-quote">"com.mycompany.fixtures"</span>);
           <span class="code-keyword">super</span>.addImport(<span class="code-quote">"com.mycompany.specials.fixtures"</span>);
        }
    }</pre>
</div></div>
<p>By this custom system under development you tell <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> to look in "com.mycompany.fixtures" and "com.mycompany.specials.fixtures" to resolve fixtures in specfications that your are running.</p>

<h4 id="Fulldeveloperguide-HTML-ChangingFixtureinstanciationmechanism%28Springexample%29">Changing Fixture instanciation mechanism (Spring example)</h4>
<h2 id="Fulldeveloperguide-HTML-TheSpringcontainersystemunderdevelopment">The Spring container system under development</h2>

<p>Spring is an <span class="nobr"><a href="/web/20121008025351/http://martinfowler.com/articles/injection.html" rel="nofollow">Inversion Of Control (IOC)<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span> container get more information about it on <span class="nobr"><a href="/web/20121008025351/http://static.springframework.org/spring/docs/2.5.x/reference/" rel="nofollow">Spring website<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span></p>

<p>SpringSystemUnderDevelopment code can be found in greenpepper-extensions-spring: <span class="nobr"><a href="/web/20121008025351/http://www.greenpeppersoftware.com/svn/tags/greenpepper-open-2.5/java/extensions-external/spring/src/main/java/com/greenpepper/extensions/spring/SpringSystemUnderDevelopment.java" rel="nofollow">SpringSystemUnderDevelopment.java<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span></p>

<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">package</span> com.greenpepper.extensions.spring;

<span class="code-keyword">import</span> org.springframework.beans.factory.BeanFactory;
<span class="code-keyword">import</span> org.springframework.beans.factory.NoSuchBeanDefinitionException;
<span class="code-keyword">import</span> org.springframework.beans.factory.config.BeanDefinition;
<span class="code-keyword">import</span> org.springframework.beans.factory.support.DefaultListableBeanFactory;
<span class="code-keyword">import</span> org.springframework.beans.factory.support.RootBeanDefinition;

<span class="code-keyword">import</span> com.greenpepper.reflect.DefaultFixture;
<span class="code-keyword">import</span> com.greenpepper.reflect.Fixture;
<span class="code-keyword">import</span> com.greenpepper.systemunderdevelopment.DefaultSystemUnderDevelopment;

<span class="code-keyword">public</span> class SpringSystemUnderDevelopment <span class="code-keyword">extends</span> DefaultSystemUnderDevelopment
{
    <span class="code-keyword">private</span> BeanFactory beanFactory;

    <span class="code-keyword">public</span> SpringSystemUnderDevelopment(<span class="code-object">String</span>... applicationCtxes)
    {
        <span class="code-keyword">this</span>.beanFactory = <span class="code-keyword">new</span> GreenPepperXMLAplicationContext(applicationCtxes).getBeanFactory();
    }
	
    <span class="code-keyword">public</span> SpringSystemUnderDevelopment(BeanFactory beanFactory)
    {
        <span class="code-keyword">this</span>.beanFactory = beanFactory;
    }

    @Override
    <span class="code-keyword">public</span> Fixture getFixture(<span class="code-object">String</span> fixtureName, <span class="code-object">String</span>... params) <span class="code-keyword">throws</span> Throwable
    {
		Fixture fixture;
		<span class="code-keyword">if</span> (params.length != 0)
        {
		    <span class="code-comment">// When params are used, we use the PlainOldSystemUnderDevelopment to instantiate the fixture
</span>			<span class="code-comment">// these params are passed to the constructor
</span>            fixture = <span class="code-keyword">super</span>.getFixture(fixtureName, params);
        }
		<span class="code-keyword">else</span>
		{
	        <span class="code-keyword">try</span>
	        {
	            fixture = <span class="code-keyword">new</span> DefaultFixture(beanFactory.getBean(fixtureName));
	        }
	        <span class="code-keyword">catch</span> (NoSuchBeanDefinitionException e)
	        {
	            fixture = <span class="code-keyword">new</span> DefaultFixture(instantiateAsAutowiredBean(fixtureName));
	        }
		}
		
		<span class="code-keyword">return</span> fixture;
    }

    <span class="code-keyword">private</span> <span class="code-object">Object</span> instantiateAsAutowiredBean(<span class="code-object">String</span> fixtureName) <span class="code-keyword">throws</span> Exception
    {
        <span class="code-object">Class</span> fixtureClass = loadType(fixtureName).getUnderlyingClass();

        BeanDefinition beanDef = <span class="code-keyword">new</span> RootBeanDefinition(fixtureClass, RootBeanDefinition.AUTOWIRE_AUTODETECT);
        
        DefaultListableBeanFactory fallFactory = <span class="code-keyword">new</span> DefaultListableBeanFactory(beanFactory);
        fallFactory.registerBeanDefinition(fixtureName, beanDef);

        <span class="code-keyword">return</span> fallFactory.getBean(fixtureName);
    }
}</pre>
</div></div>




<h2 id="Fulldeveloperguide-HTML-Hookingdocumentexecution">Hooking document execution</h2>

<p>To hook a document execution, you need to define a <b><a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Defining+a+custom+system+under+development" title="Defining a custom system under development">custom sytem under development</a></b></p>

<div class="preformatted"><div class="preformattedContent">
<pre> public static class CustomSystemUnderDevelopment extends DefaultSystemUnderDevelopment
    {
        public CustomSystemUnderDevelopment( String... params )
        {
           
        }

       public void onStartDocument(Document document)
       {
          //this method is called before GreenPepper execute a document
       }

       public void onEndDocument(Document document)
       {
          //this method is called after GreenPepper has executed the document              
       }
    }
</pre>
</div></div>
<h2 id="Fulldeveloperguide-HTML-Executespecificationswithcommandline">Execute specifications with command line</h2>

<h2 id="Fulldeveloperguide-HTML-Introduction">Introduction</h2>

<p>This page describes how to execute a specification using the command line interface that comes with <img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/>.</p>

<h2 id="Fulldeveloperguide-HTML-Features">Features</h2>

<p><img src="/web/20121008025351im_/http://greenpeppersoftware.com/confluence/download/attachments/158269938/greenpepper-text.png"  style="margin: 0 0 -4 0;display:inline;"/> provides a command line interface to execute specifications captured in HTML files. The command line interface has the following features:</p>

<ul>
	<li>Execution of a single specification file</li>
	<li>Execution of a suite of specifications stored in a directory tree</li>
</ul>


<h2 id="Fulldeveloperguide-HTML-GreenPeppercommandline">GreenPepper command line</h2>

<ul>
	<li><h3 id="Fulldeveloperguide-HTML-InJavaJavacommandlineoptions"><a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Java+command+line+options" title="Java command line options">In Java</a></h3></li>
	<li><h3 id="Fulldeveloperguide-HTML-In.NET.NETcommandlineoptions"><a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/.NET+command+line+options" title=".NET command line options">In .NET</a></h3></li>
</ul>

<h1 id="Fulldeveloperguide-HTML-8.Developerexamples">8. Developer examples</h1>
<h2 id="Fulldeveloperguide-HTML-TheGuicecontainersystemunderdevelopment">The Guice container system under development</h2>

<p>Google Guice is an <span class="nobr"><a href="/web/20121008025351/http://martinfowler.com/articles/injection.html" rel="nofollow">Inversion Of Control (IOC)<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span> container get more information about it on <span class="nobr"><a href="/web/20121008025351/http://code.google.com/p/google-guice/" rel="nofollow">Google Guice website<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span></p>

<p>GuiceSystemUnderDevelopment code can be found in greenpepper-extension-guice: <span class="nobr"><a href="/web/20121008025351/http://www.greenpeppersoftware.com/svn/tags/greenpepper-open-2.5/java/extensions-external/guice/src/main/java/com/greenpepper/extensions/guice/GuiceSystemUnderDevelopment.java" rel="nofollow">GuiceSystemUnderDevelopment.java<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span></p>

<div class="code"><div class="codeHeader"><b>Guice system under development sample</b></div><div class="codeContent">
<pre class="code-java"><span class="code-keyword">package</span> com.greenpepper.extensions.guice;

<span class="code-keyword">import</span> java.util.ArrayList;
<span class="code-keyword">import</span> java.util.Collections;
<span class="code-keyword">import</span> java.util.List;

<span class="code-keyword">import</span> com.google.inject.Guice;
<span class="code-keyword">import</span> com.google.inject.Injector;
<span class="code-keyword">import</span> com.google.inject.Module;
<span class="code-keyword">import</span> com.greenpepper.reflect.DefaultFixture;
<span class="code-keyword">import</span> com.greenpepper.reflect.Fixture;
<span class="code-keyword">import</span> com.greenpepper.systemunderdevelopment.DefaultSystemUnderDevelopment;

<span class="code-keyword">public</span> class GuiceSystemUnderDevelopment <span class="code-keyword">extends</span> DefaultSystemUnderDevelopment
{

	<span class="code-keyword">private</span> Injector injector;
	<span class="code-keyword">private</span> List&lt;<span class="code-object">String</span>&gt; moduleNames = <span class="code-keyword">new</span> ArrayList&lt;<span class="code-object">String</span>&gt;();

	<span class="code-keyword">public</span> GuiceSystemUnderDevelopment()
	{
	}

	<span class="code-keyword">public</span> GuiceSystemUnderDevelopment(<span class="code-object">String</span>... moduleNames)
	{
		Collections.addAll(<span class="code-keyword">this</span>.moduleNames, moduleNames);
	}

	@Override
	<span class="code-keyword">public</span> Fixture getFixture(<span class="code-object">String</span> name, <span class="code-object">String</span>... params)
			<span class="code-keyword">throws</span> Throwable
	{
		lazilyInstantiateModulesAndInjector();

		Fixture fixture;

		<span class="code-keyword">if</span> (params.length != 0)
		{
			<span class="code-comment">// When params are used, we use the PlainOldSystemUnderDevelopment to instantiate the fixture
</span>			<span class="code-comment">// these params are passed to the constructor
</span>			<span class="code-comment">// Then we use Guice to inject members
</span>			fixture = <span class="code-keyword">super</span>.getFixture(name, params);
			injector.injectMembers(fixture.getTarget());
		}
		<span class="code-keyword">else</span>
		{
			<span class="code-comment">// Use Guice to instantiate
</span>			<span class="code-object">Class</span>&lt;?&gt; klass = loadType(name).getUnderlyingClass();
			<span class="code-object">Object</span> target = injector.getInstance(klass);
			fixture = <span class="code-keyword">new</span> DefaultFixture(target);
		}

		<span class="code-keyword">return</span> fixture;
	}

	<span class="code-keyword">private</span> void lazilyInstantiateModulesAndInjector()
			<span class="code-keyword">throws</span> Exception
	{
		<span class="code-keyword">if</span> (injector == <span class="code-keyword">null</span>)
		{
			List&lt;Module&gt; modules = convertModuleNamesToModules();
			injector = Guice.createInjector(modules);
		}
	}

	<span class="code-keyword">private</span> List&lt;Module&gt; convertModuleNamesToModules()
			<span class="code-keyword">throws</span> Exception
	{
		List&lt;Module&gt; modules = <span class="code-keyword">new</span> ArrayList&lt;Module&gt;(moduleNames.size());
		<span class="code-keyword">for</span> (<span class="code-object">String</span> moduleName : moduleNames)
		{
			<span class="code-object">Class</span>&lt;?&gt; klass = loadType(moduleName).getUnderlyingClass();
			modules.add((Module)klass.newInstance());
		}
		<span class="code-keyword">return</span> modules;
	}

	<span class="code-keyword">public</span> void addModules(<span class="code-object">String</span>... moduleNames)
	{
		<span class="code-keyword">if</span> (injector == <span class="code-keyword">null</span>)
		{
			Collections.addAll(<span class="code-keyword">this</span>.moduleNames, moduleNames);
		}
		<span class="code-keyword">else</span>
		{
			<span class="code-keyword">throw</span> <span class="code-keyword">new</span> IllegalStateException(<span class="code-quote">"Cannot add module after a fixture has been instantiated"</span>);
		}
	}
}</pre>
</div></div>
<h2 id="Fulldeveloperguide-HTML-RestFixturesample">Rest Fixture sample</h2>

<table cellpadding='5' width='85%' cellspacing='8px' class='noteMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">Only available in Java</b><br /></td></tr></table>

<p>Here is an example of a fixture to test Rest web services.<br/>
RestFixture code can be found in greenpepper-extension-sandbox : <span class="nobr"><a href="/web/20121008025351/http://www.greenpeppersoftware.com/svn/tags/greenpepper-open-2.5/java/extensions-external/sandbox/src/main/java/com/greenpepper/extensions/RestFixture.java" rel="nofollow">RestFixture.java<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span></p>

<p>RestFixture support <b>GET</b> <b>POST</b> <b>DELETE</b> <b>PUT</b> <b>HEAD</b> HTTP methods.<br/>
Available readable properties are <b>responseHeader(headerName)</b> <b>responseBody</b> <b>responseStatus</b></p>

<table style="display:none">
	<tr>
		<td>Import</td>
	</tr>
			<tr>
			<td>com.greenpepper.extensions</td>
		</tr>
	</table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>do with </th>
<td class='confluenceTd'> Rest Fixture </td>
<th class='confluenceTh'> on </th>
<td class='confluenceTd'> <span class="nobr"><a href="/web/20121008025351/http://localhost:9998/" rel="nofollow">http://localhost:9998<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span> </td>
</tr>
</tbody></table>

<h3 id="Fulldeveloperguide-HTML-GETexample">GET example</h3>

<blockquote>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> GET </th>
<td class='confluenceTd'> /helloworld </td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status         </td>
<td class='confluenceTd'> 200 </td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response header         </td>
<th class='confluenceTh'> Content-Type </th>
<td class='confluenceTd'> text/plain  </td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response body           </td>
<td class='confluenceTd'> Hello World </td>
</tr>
</tbody></table></blockquote>

<blockquote>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> GET </th>
<td class='confluenceTd'> /unknown</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 404 </td>
</tr>
</tbody></table></blockquote>

<h3 id="Fulldeveloperguide-HTML-POSTexample%28createresource%29">POST example (create resource)</h3>
<blockquote>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>set request body</th>
<td class='confluenceTd'> Hello GreenPepper </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>POST  </th>
<td class='confluenceTd'> /messages</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 201 </td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response header </td>
<th class='confluenceTh'> Location </th>
<td class='confluenceTd'> <span class="nobr"><a href="/web/20121008025351/http://localhost:9998/messages/0" rel="nofollow">http://localhost:9998/messages/0<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span> </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>GET   </th>
<td class='confluenceTd'> /messages/0</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 200 </td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response body </td>
<td class='confluenceTd'> Hello GreenPepper </td>
</tr>
</tbody></table></blockquote>

<h3 id="Fulldeveloperguide-HTML-Requestwithcustomheaderexample">Request with custom header example</h3>
<blockquote>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'> set request header </th>
<td class='confluenceTd'>Accept</td>
<th class='confluenceTh'> as </th>
<td class='confluenceTd'> application/xml</td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>GET   </th>
<td class='confluenceTd'> /messages/0</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 200 </td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response body </td>
<td class='confluenceTd'> <div class="code"><div class="codeContent">
<pre class="code-xml">&amp;#60;?xml version=<span class="code-quote">"1.0"</span>&amp;#62;&amp;#60;message id=<span class="code-quote">"0"</span> value=<span class="code-quote">"Hello GreenPepper"</span> /&amp;#62;</pre>
</div></div></td>
</tr>
</tbody></table></blockquote>

<h3 id="Fulldeveloperguide-HTML-PUTexample%28updateresource%29">PUT example (update resource)</h3>
<blockquote>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>set request body</th>
<td class='confluenceTd'> Hello from GreenPepper </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>PUT  </th>
<td class='confluenceTd'> /messages/0</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 200 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>GET   </th>
<td class='confluenceTd'> /messages/0</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response body </td>
<td class='confluenceTd'> Hello from GreenPepper </td>
</tr>
</tbody></table></blockquote>

<h3 id="Fulldeveloperguide-HTML-HEADexample%28checkifspecifiedresourceexists%29">HEAD example (check if specified resource exists)</h3>
<blockquote>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>HEAD  </th>
<td class='confluenceTd'> /messages/0</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 200 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>HEAD  </th>
<td class='confluenceTd'> /messages/1</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 404 </td>
</tr>
</tbody></table></blockquote>

<h3 id="Fulldeveloperguide-HTML-DELETEexample">DELETE example</h3>
<blockquote>
<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>DELETE</th>
<td class='confluenceTd'> /messages/0</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 200 </td>
</tr>
</tbody></table>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>GET   </th>
<td class='confluenceTd'> /messages/0</td>
</tr>
<tr>
<th class='confluenceTh'>check </th>
<td class='confluenceTd'> response status </td>
<td class='confluenceTd'> 404 </td>
</tr>
</tbody></table></blockquote>

<table class='confluenceTable'><tbody>
<tr>
<th class='confluenceTh'>end</th>
</tr>
</tbody></table>

<h2 id="Fulldeveloperguide-HTML-TheSpringcontainersystemunderdevelopment">The Spring container system under development</h2>

<p>Spring is an <span class="nobr"><a href="/web/20121008025351/http://martinfowler.com/articles/injection.html" rel="nofollow">Inversion Of Control (IOC)<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span> container get more information about it on <span class="nobr"><a href="/web/20121008025351/http://static.springframework.org/spring/docs/2.5.x/reference/" rel="nofollow">Spring website<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span></p>

<p>SpringSystemUnderDevelopment code can be found in greenpepper-extensions-spring: <span class="nobr"><a href="/web/20121008025351/http://www.greenpeppersoftware.com/svn/tags/greenpepper-open-2.5/java/extensions-external/spring/src/main/java/com/greenpepper/extensions/spring/SpringSystemUnderDevelopment.java" rel="nofollow">SpringSystemUnderDevelopment.java<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span></p>

<div class="code"><div class="codeContent">
<pre class="code-java"><span class="code-keyword">package</span> com.greenpepper.extensions.spring;

<span class="code-keyword">import</span> org.springframework.beans.factory.BeanFactory;
<span class="code-keyword">import</span> org.springframework.beans.factory.NoSuchBeanDefinitionException;
<span class="code-keyword">import</span> org.springframework.beans.factory.config.BeanDefinition;
<span class="code-keyword">import</span> org.springframework.beans.factory.support.DefaultListableBeanFactory;
<span class="code-keyword">import</span> org.springframework.beans.factory.support.RootBeanDefinition;

<span class="code-keyword">import</span> com.greenpepper.reflect.DefaultFixture;
<span class="code-keyword">import</span> com.greenpepper.reflect.Fixture;
<span class="code-keyword">import</span> com.greenpepper.systemunderdevelopment.DefaultSystemUnderDevelopment;

<span class="code-keyword">public</span> class SpringSystemUnderDevelopment <span class="code-keyword">extends</span> DefaultSystemUnderDevelopment
{
    <span class="code-keyword">private</span> BeanFactory beanFactory;

    <span class="code-keyword">public</span> SpringSystemUnderDevelopment(<span class="code-object">String</span>... applicationCtxes)
    {
        <span class="code-keyword">this</span>.beanFactory = <span class="code-keyword">new</span> GreenPepperXMLAplicationContext(applicationCtxes).getBeanFactory();
    }
	
    <span class="code-keyword">public</span> SpringSystemUnderDevelopment(BeanFactory beanFactory)
    {
        <span class="code-keyword">this</span>.beanFactory = beanFactory;
    }

    @Override
    <span class="code-keyword">public</span> Fixture getFixture(<span class="code-object">String</span> fixtureName, <span class="code-object">String</span>... params) <span class="code-keyword">throws</span> Throwable
    {
		Fixture fixture;
		<span class="code-keyword">if</span> (params.length != 0)
        {
		    <span class="code-comment">// When params are used, we use the PlainOldSystemUnderDevelopment to instantiate the fixture
</span>			<span class="code-comment">// these params are passed to the constructor
</span>            fixture = <span class="code-keyword">super</span>.getFixture(fixtureName, params);
        }
		<span class="code-keyword">else</span>
		{
	        <span class="code-keyword">try</span>
	        {
	            fixture = <span class="code-keyword">new</span> DefaultFixture(beanFactory.getBean(fixtureName));
	        }
	        <span class="code-keyword">catch</span> (NoSuchBeanDefinitionException e)
	        {
	            fixture = <span class="code-keyword">new</span> DefaultFixture(instantiateAsAutowiredBean(fixtureName));
	        }
		}
		
		<span class="code-keyword">return</span> fixture;
    }

    <span class="code-keyword">private</span> <span class="code-object">Object</span> instantiateAsAutowiredBean(<span class="code-object">String</span> fixtureName) <span class="code-keyword">throws</span> Exception
    {
        <span class="code-object">Class</span> fixtureClass = loadType(fixtureName).getUnderlyingClass();

        BeanDefinition beanDef = <span class="code-keyword">new</span> RootBeanDefinition(fixtureClass, RootBeanDefinition.AUTOWIRE_AUTODETECT);
        
        DefaultListableBeanFactory fallFactory = <span class="code-keyword">new</span> DefaultListableBeanFactory(beanFactory);
        fallFactory.registerBeanDefinition(fixtureName, beanDef);

        <span class="code-keyword">return</span> fallFactory.getBean(fixtureName);
    }
}</pre>
</div></div>

<h2 id="Fulldeveloperguide-HTML-TheWindsorcastlecontainersystemunderdevelopment">The Windsor castle container system under development</h2>

<p>Windsor container is an <span class="nobr"><a href="/web/20121008025351/http://martinfowler.com/articles/injection.html" rel="nofollow">Inversion Of Control (IOC)<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span> container get more information about it on  <span class="nobr"><a href="/web/20121008025351/http://www.castleproject.org/container/gettingstarted/index.html" rel="nofollow">Windsor Castle website<sup><img class="rendericon" src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/linkext7.gif" height="7" width="7" align="absmiddle" alt="" border="0"/></sup></a></span></p>

<table cellpadding='5' width='85%' cellspacing='8px' class='noteMacro' border="0" align='center'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="/web/20121008025351im_/http://www.greenpeppersoftware.com/confluence/images/icons/emoticons/warning.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td><b class="strong">New in GreenPepper .Net 1.3</b><br /></td></tr></table>
<table style="display:none">
	<tr>
		<td>Import</td>
	</tr>
			<tr>
			<td>GreenPepper.WindsorCastle.Fixtures</td>
		</tr>
	</table>

<p><br clear="all" /></p>

<h5 id="Fulldeveloperguide-HTML-ACastlebasicXmlconfigurationfile">A Castle basic Xml configuration file</h5>
<div class="code"><div class="codeContent">
<pre class="code-xml"><span class="code-tag">&lt;configuration&gt;</span>
    <span class="code-tag">&lt;components&gt;</span>
        <span class="code-tag">&lt;component id=<span class="code-quote">"Windsor.HelloWorld"</span> type=<span class="code-quote">"GreenPepper.WindsorCastle.Fixtures.WindsorHelloWorld, GreenPepper.Extensions"</span>&gt;</span>
            <span class="code-tag">&lt;parameters&gt;</span>
            	<span class="code-tag">&lt;injectedConstructor&gt;</span>hello constructor<span class="code-tag">&lt;/injectedConstructor&gt;</span>
                <span class="code-tag">&lt;injectedProperty&gt;</span>hello property<span class="code-tag">&lt;/injectedProperty&gt;</span>
            <span class="code-tag">&lt;/parameters&gt;</span>
        <span class="code-tag">&lt;/component&gt;</span>

        &lt;component id=<span class="code-quote">"Windsor.component1"</span> 
        	type=<span class="code-quote">"GreenPepper.WindsorCastle.Fixtures.MyComponent1, GreenPepper.Extensions"</span>&gt;
        <span class="code-tag">&lt;/component&gt;</span>
        
        &lt;component id=<span class="code-quote">"Windsor.component2"</span>
        	type=<span class="code-quote">"GreenPepper.WindsorCastle.Fixtures.MyComponent2, GreenPepper.Extensions"</span>&gt;
        <span class="code-tag">&lt;/component&gt;</span>
        
        <span class="code-tag">&lt;component id=<span class="code-quote">"Windsor.AutoWired"</span> type=<span class="code-quote">"GreenPepper.WindsorCastle.Fixtures.WindsorAutoWiredFixture, GreenPepper.Extensions"</span> /&gt;</span>
    <span class="code-tag">&lt;/components&gt;</span>
<span class="code-tag">&lt;/configuration&gt;</span></pre>
</div></div>

<h5 id="Fulldeveloperguide-HTML-HowtouseWindsorsystemunderdevelopment%3A">How to use Windsor system under development :</h5>
<table style="display:none">
	<tr>
		<td>Begin Info</td>
	</tr>
</table>
<div style="padding:0px; margin:0px; ">
		
<ul>
	<li>Requirements :</li>
</ul>
<ol>
	<li>You must add GreenPepper.Extensions.Castle.Windsor assembly in your configuration assemblies</li>
	<li>You must notify GreenPepper Core to use Windsor system under development : <b>GreenPepper.WindsorCastle.WindsorSystemUnderDevelopment</b></li>
</ol>


<p>(You can find more about system under development configuration here : <a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Defining+a+custom+system+under+development" title="Defining a custom system under development">Using a custom SystemUnderDevelopment</a>)</p>

<ul>
	<li>If you use a Windsor xml configuration file :<br/>
Just add the path to your Windsor configuration file in the system under development arguments</li>
</ul>

</div>
<table style="display:none">
	<tr>
		<td>End Info</td>
	</tr>
</table>


<div class="code"><div class="codeHeader"><b>WindsorCastle system under development</b></div><div class="codeContent">
<pre class="code-java">using <span class="code-object">System</span>;
using Castle.MicroKernel;
using Castle.Windsor;
using GreenPepper.Fixtures;
using GreenPepper.Reflect;

namespace GreenPepper.WindsorCastle
{
    <span class="code-keyword">public</span> class WindsorSystemUnderDevelopment : PlainOldSystemUnderDevelopment
    {
        <span class="code-keyword">private</span> IWindsorContainer container;

        <span class="code-keyword">public</span> WindsorSystemUnderDevelopment(IWindsorContainer container)
        {
            <span class="code-keyword">this</span>.container = container;
        }

        <span class="code-keyword">public</span> WindsorSystemUnderDevelopment():<span class="code-keyword">this</span>(<span class="code-keyword">new</span> WindsorContainer())
        {    
        }

        <span class="code-keyword">public</span> WindsorSystemUnderDevelopment(params string[] xmlConfigurationFile)
            : <span class="code-keyword">this</span>(<span class="code-keyword">new</span> WindsorContainer(xmlConfigurationFile[0]))
        {
        }

        <span class="code-keyword">public</span> override IFixture GetFixture(string fixtureName, params string[] parameters)
        {
            <span class="code-keyword">try</span>
            {
                Type type = TypeForName(fixtureName);
                container.AddComponent(type.FullName, type);
                <span class="code-keyword">return</span> <span class="code-keyword">new</span> DefaultFixture(container.Resolve(type));
            }
            <span class="code-keyword">catch</span> (Exception)
            {
                <span class="code-keyword">try</span>
                {
                    <span class="code-keyword">return</span> <span class="code-keyword">new</span> DefaultFixture(container.Resolve(fixtureName));   
                }
                <span class="code-keyword">catch</span> (ComponentNotFoundException)
                {
                    <span class="code-keyword">return</span> base.GetFixture(fixtureName, parameters);
                }
            }
        }
    }
}</pre>
</div></div>
                            </div>

                            <!--
<rdf:RDF xmlns:rdf="/web/20121008025351/http://www.w3.org/1999/02/22-rdf-syntax-ns#"
         xmlns:dc="/web/20121008025351/http://purl.org/dc/elements/1.1/"
         xmlns:trackback="/web/20121008025351/http://madskills.com/public/xml/rss/module/trackback/">
<rdf:Description
    rdf:about="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML"
    dc:identifier="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/display/GPWODOC/Full+developer+guide+-+HTML"
    dc:title="Full developer guide - HTML"
    trackback:ping="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/rpc/trackback/158827462"/>
</rdf:RDF>
-->

                            
                    
                                <!--
    Root decorator: all decisions about how a page is to be decorated via the
                    inline decoration begins here.
-->



<!--
    Switch based upon the context. However, for now, just delegate to a decorator
    identified directly by the context.
-->


    
    

<div class="wiki-content" style="margin-right:10px;">
    <p style="clear: both"/><!-- comments should always display underneath the content. we should have a 'clear:both' here just in case there are floats or aligned images in the content -->

    
    
    
    
                                    </div>



                                                            </td>


                                                    </tr>
        </table>

        
        </td>
    </tr>
</table>

    </div>

  	                                                    <div class="license license-demonstration">
                      <b>DEMONSTRATION LICENSE</b> - This Confluence site is for demonstration purposes only. <a href="/web/20121008025351/http://www.atlassian.com/c/conf/11462">Evaluate Confluence today</a>.<br>
                    </div>
                                            <div class="bottomshadow"></div>
  	<div id="poweredby" class="smalltext">
		Powered by <a href="/web/20121008025351/http://www.atlassian.com/wiki/?clicked=footer" class="smalltext">Atlassian Confluence</a>, the <a href="/web/20121008025351/http://www.atlassian.com/wiki/?clicked=footer" class="smalltext">Enterprise Wiki</a>. (Version: 2.4.3 Build:#705 Mar 21, 2007)
		-
		<a href="/web/20121008025351/http://jira.atlassian.com/secure/BrowseProject.jspa?id=10470" class="smalltext">Bug/feature request</a>
		-
		<a href="/web/20121008025351/http://www.greenpeppersoftware.com/confluence/administrators.action">Contact Administrators</a>
		<br/>
	</div>

<!-- delay the loading of large javascript files to the end so that they don't interfere with the loading of page content -->
<span style="display: none">
    <script type="text/javascript" language="JavaScript">var domainName = '/web/20121008025351/http://www.greenpeppersoftware.com/confluence'; var entityId = '158827462'; var spaceKey = 'GPWODOC'</script>
    <script type="text/javascript" language="JavaScript" src="/web/20121008025351js_/http://www.greenpeppersoftware.com/confluence/s/705/1/_/labels-javascript"></script>
    <script>new Ajax.Autocompleter('labelName', 'labelsAutocompleteList', '158827462', { tokens: new Array(',', ' '), dwrFunction: GenerateAutocompleteLabelsListForEntity.autocompleteLabels});</script>
</span>

<script type="text/javascript">
var gaJsHost = (("https:" == document.location.protocol) ? "/web/20121008025351/https://ssl." : "/web/20121008025351/http://www.");
document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
</script>
<script type="text/javascript">
try{
var pageTracker = _gat._getTracker("UA-17361539-1");
pageTracker._trackPageview();
} catch(err) {}
function trackDownload(id) {
    pageTracker._trackEvent('GreenPepper', 'Download', id);
    return true;
}</script>
<script type="text/javascript" src="/web/20121008025351js_/http://s3.amazonaws.com/new.cetrk.com/pages/scripts/0010/6670.js"> </script>
</body>
</html>




<!--
     FILE ARCHIVED ON 2:53:51 Oct 8, 2012 AND RETRIEVED FROM THE
     INTERNET ARCHIVE ON 8:38:00 Sep 19, 2014.
     JAVASCRIPT APPENDED BY WAYBACK MACHINE, COPYRIGHT INTERNET ARCHIVE.

     ALL OTHER CONTENT MAY ALSO BE PROTECTED BY COPYRIGHT (17 U.S.C.
     SECTION 108(a)(3)).
-->
